import{ab as ft,ac as Et,r,ad as mt,ae as gt,a3 as Ue,af as Ze,a2 as Dt,ag as bt,a4 as pt,ah as It,ai as Ot,j as s,v as Rt,d as U,F as ce,aj as Tt,K as J,o as Ge,O as et,C as Z,x as W,y as de,z as H,A as _,H as tt,E as je,ak as At,al as st,am as Ct,N as oe,M as se,Q,an as Nt,w as qe,a1 as _t,B as ct,ao as Lt,Z as yt,s as Pt,ap as vt}from"./index-Db1G4GFK.js";import{u as y,z as E,t as Se,s as L,h as Ee,D as $t,P as Bt}from"./SnackbarDefaults-bH2yLHx5.js";import{C as ae,u as Ft,i as Ht,b as De,a as _e,S as z,c as Oe,F as Ut}from"./CustomFormDialog-CJNVvg9u.js";import{C as Ae,S as kt,a as xe,b as Re}from"./CustomSelectField-BK9WybEE.js";import{S as Me}from"./SelectListShifts-CS2NmeDY.js";import{I as Ve}from"./InputAdornment-B4lIQZ4Z.js";import{B as Gt,a as xt,b as wt,c as Mt,d as Vt,e as jt,u as qt}from"./RolesApi-C49UzPy3.js";import{E as Ce,N as at}from"./FormErrors-CNJI8p9W.js";import{c as Yt,d as zt,e as Kt,f as Jt,u as Ye,g as Qt,C as Ne,a as ut,b as pe}from"./BusinessPhasesApi-IBxa8BZM.js";import{C as Xt}from"./Checkbox-BhZaxc1j.js";import{C as me}from"./CustomDatePickerField-CncB9y7f.js";import{d as We}from"./ShiftsApi-CqFIuQVz.js";import"./ListSubheader-CyAfKHC_.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="cef2457a-b411-418d-bc0a-708436ac4257",n._sentryDebugIdIdentifier="sentry-dbid-cef2457a-b411-418d-bc0a-708436ac4257")}catch{}})();const dt="Button";function Wt(n){return ft(dt,n)}Et(dt,["root","active","disabled","focusVisible"]);function Zt(n={}){const{disabled:e=!1,focusableWhenDisabled:t,href:a,rootRef:o,tabIndex:c,to:i,type:S}=n,p=r.useRef(),[I,R]=r.useState(!1),{isFocusVisibleRef:T,onFocus:k,onBlur:P,ref:B}=mt(),[F,A]=r.useState(!1);e&&!t&&F&&A(!1),r.useEffect(()=>{T.current=F},[F,T]);const[g,v]=r.useState(""),N=b=>u=>{var l;F&&u.preventDefault(),(l=b.onMouseLeave)==null||l.call(b,u)},M=b=>u=>{var l;P(u),T.current===!1&&A(!1),(l=b.onBlur)==null||l.call(b,u)},$=b=>u=>{var l;if(p.current||(p.current=u.currentTarget),k(u),T.current===!0){var f;A(!0),(f=b.onFocusVisible)==null||f.call(b,u)}(l=b.onFocus)==null||l.call(b,u)},G=()=>{const b=p.current;return g==="BUTTON"||g==="INPUT"&&["button","submit","reset"].includes(b==null?void 0:b.type)||g==="A"&&(b==null?void 0:b.href)},q=b=>u=>{if(!e){var l;(l=b.onClick)==null||l.call(b,u)}},Y=b=>u=>{var l;e||(R(!0),document.addEventListener("mouseup",()=>{R(!1)},{once:!0})),(l=b.onMouseDown)==null||l.call(b,u)},m=b=>u=>{var l;if((l=b.onKeyDown)==null||l.call(b,u),!u.defaultMuiPrevented&&(u.target===u.currentTarget&&!G()&&u.key===" "&&u.preventDefault(),u.target===u.currentTarget&&u.key===" "&&!e&&R(!0),u.target===u.currentTarget&&!G()&&u.key==="Enter"&&!e)){var f;(f=b.onClick)==null||f.call(b,u),u.preventDefault()}},h=b=>u=>{var l;if(u.target===u.currentTarget&&R(!1),(l=b.onKeyUp)==null||l.call(b,u),u.target===u.currentTarget&&!G()&&!e&&u.key===" "&&!u.defaultMuiPrevented){var f;(f=b.onClick)==null||f.call(b,u)}},d=r.useCallback(b=>{var u;v((u=b==null?void 0:b.tagName)!=null?u:"")},[]),D=gt(d,o,B,p),O={};return c!==void 0&&(O.tabIndex=c),g==="BUTTON"?(O.type=S??"button",t?O["aria-disabled"]=e:O.disabled=e):g!==""&&(!a&&!i&&(O.role="button",O.tabIndex=c??0),e&&(O["aria-disabled"]=e,O.tabIndex=t?c??0:-1)),{getRootProps:(b={})=>{const u=Ue({},Ze(n),Ze(b)),l=Ue({type:S},u,O,b,{onBlur:M(u),onClick:q(u),onFocus:$(u),onKeyDown:m(u),onKeyUp:h(u),onMouseDown:Y(u),onMouseLeave:N(u),ref:D});return delete l.onFocusVisible,l},focusVisible:F,setFocusVisible:A,active:I,rootRef:D}}const es=["action","children","disabled","focusableWhenDisabled","onFocusVisible","slotProps","slots"],ts=n=>{const{active:e,disabled:t,focusVisible:a}=n;return It({root:["root",t&&"disabled",a&&"focusVisible",e&&"active"]},Ot(Wt))},ss=r.forwardRef(function(e,t){var a;const{action:o,children:c,focusableWhenDisabled:i=!1,slotProps:S={},slots:p={}}=e,I=Dt(e,es),R=r.useRef(),{active:T,focusVisible:k,setFocusVisible:P,getRootProps:B}=Zt(Ue({},e,{focusableWhenDisabled:i}));r.useImperativeHandle(o,()=>({focusVisible:()=>{P(!0),R.current.focus()}}),[P]);const F=Ue({},e,{active:T,focusableWhenDisabled:i,focusVisible:k}),A=ts(F),g=I.href||I.to?"a":"button",v=(a=p.root)!=null?a:g,N=bt({elementType:v,getSlotProps:B,externalForwardedProps:I,externalSlotProps:S.root,additionalProps:{ref:t},ownerState:F,className:A.root});return pt.jsx(v,Ue({},N,{children:c}))}),as=n=>{const{children:e,handleSubmit:t}=n;return s(Rt.form,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0,transition:{delay:.25}},className:"flex flex-col md:flex-row items-center flex-wrap w-full p-24 lg:pl-64 mb-32",onSubmit:t,children:e})},ns=n=>{const{title:e,...t}=n;return s(Tt,{sx:{backdropFilter:"blur(24px)"},type:"submit",variant:"extended",className:"fixed bottom-24 right-32 md:right-64 normal-case",color:"secondary",...t,children:U("div",{className:"flex flex-row",children:[s(ce,{className:"text-48 mr-10",size:24,children:"material-solid:save"}),e]})})},nt=n=>{const e=y(J),{control:t,errors:a,getValues:o}=n,[c,i]=r.useState(!1),[S,p]=r.useState("");return r.useEffect(()=>{p(o("logoUrl"))},[]),U(Ge,{children:[s(ae,{control:t,name:"name",label:e.t("BUSINESS_NAME"),errors:a,required:!0,InputLabelProps:{shrink:!0},placeholder:e.t("BUSINESS_NAME")}),s(ae,{control:t,name:"address",label:e.t("BUSINESS_ADDRESS"),errors:a,InputLabelProps:{shrink:!0},placeholder:e.t("BUSINESS_ADDRESS")}),s(ae,{control:t,name:"registrationNumber",label:e.t("BUSINESS_REGISTRATION_NUMBER"),errors:a,InputLabelProps:{shrink:!0},placeholder:e.t("BUSINESS_REGISTRATION_NUMBER")}),s(ae,{control:t,name:"area",label:e.t("BUSINESS_AREA"),errors:a,required:!0,disabled:!0,InputProps:{readOnly:!0,shrink:!0},placeholder:e.t("BUSINESS_AREA")}),s(ae,{control:t,name:"logoUrl",label:e.t("LOGO_URL"),errors:a,required:!0,InputLabelProps:{shrink:!0},placeholder:e.t("LOGO_URL")}),s("div",{className:"my-12 mx-6 w-full md:w-[45%] shrink-0",children:s("img",{width:70,height:70,src:"./assets/icons/logoplaceholder.png",alt:"business logo",className:`${c?"":"hidden"}`})})]})},rt=n=>{var o,c;const e=y(J),{control:t,errors:a}=n;return U(Ge,{children:[U("div",{className:"flex flex-row w-full md:w-[45%] md:mx-6",children:[s(ae,{control:t,name:"slotsShift",label:e.t("HOLIDAY_SLOTS_PER_SHIFT"),errors:a,required:!0,type:"number",double:"true",InputLabelProps:{shrink:!0},placeholder:e.t("HOLIDAY_SLOTS_PER_SHIFT")}),s("div",{className:"mx-6"}),s(ae,{control:t,name:"daysBlock",label:e.t("DAYS_BLOCK"),errors:a,required:!0,type:"number",InputProps:{endAdornment:s(Ve,{position:"end",children:"days"})},double:"true",InputLabelProps:{shrink:!0},placeholder:e.t("DAYS_BLOCK")})]}),U("div",{className:"flex flex-row w-full md:w-[45%] md:mx-6",children:[s(ae,{control:t,name:"bookingTimeOutDays",label:e.t("BOOKING_TIMEOUT"),errors:a,required:!0,type:"number",InputProps:{endAdornment:s(Ve,{position:"end",children:"days"})},double:"true",InputLabelProps:{shrink:!0},placeholder:e.t("BOOKING_TIMEOUT")}),s("div",{className:"mx-6"}),s(ae,{control:t,name:"cancellationNoticeDays",label:e.t("BOOKING_CANCELLATION_NOTICE"),errors:a,required:!0,type:"number",InputProps:{endAdornment:s(Ve,{position:"end",children:"days"})},double:"true",InputLabelProps:{shrink:!0},placeholder:e.t("BOOKING_CANCELLATION_NOTICE")})]}),U("div",{className:"flex flex-col w-full md:w-[45%] md:mx-6 pr-20",children:[U("div",{className:"flex flex-row w-full items-center",children:[s(Ae,{control:t,name:"dayShiftStartHour",label:e.t("DAY_SHIFT_START_HOUR"),errors:a,selectList:Me,required:!0,type:"number",double:"true",InputLabelProps:{shrink:!0},placeholder:e.t("DAY_SHIFT_START_HOUR")})," ",s("span",{className:"mx-12 mt-4",children:"-"}),s(Ae,{control:t,name:"dayShiftEndHour",label:e.t("DAY_SHIFT_END_HOUR"),errors:a,selectList:Me,required:!0,type:"number",double:"true",InputLabelProps:{shrink:!0},placeholder:e.t("DAY_SHIFT_END_HOUR")})]}),s(et,{error:!0,children:((o=a.dayShiftEndHour)==null?void 0:o.message)||" "})]}),U("div",{className:"flex flex-col w-full md:w-[45%] md:mx-6 pr-20",children:[U("div",{className:"flex flex-row w-full items-center",children:[s(Ae,{control:t,name:"nightShiftStartHour",label:e.t("NIGHT_SHIFT_START_HOUR"),errors:a,selectList:Me,required:!0,type:"number",double:"true",InputLabelProps:{shrink:!0},placeholder:e.t("NIGHT_SHIFT_START_HOUR")})," ",s("span",{className:"mx-12 mt-4",children:"-"}),s(Ae,{control:t,name:"nightShiftEndHour",label:e.t("NIGHT_SHIFT_END_HOUR"),errors:a,selectList:Me,required:!0,type:"number",double:"true",InputLabelProps:{shrink:!0},placeholder:e.t("NIGHT_SHIFT_END_HOUR")})]}),s(et,{error:!0,children:((c=a.nightShiftEndHour)==null?void 0:c.message)||" "})]}),s(ae,{control:t,name:"coreHrlUrl",label:e.t("CORE_HR_URL"),errors:a,required:!0,InputLabelProps:{shrink:!0},placeholder:e.t("CORE_HR_URL")}),s("div",{className:"flex flex-row w-full md:w-[45%] md:mx-3",children:s(ae,{control:t,name:"sessionDurationMins",label:e.t("SESSION_DURATION"),errors:a,required:!0,type:"number",InputProps:{endAdornment:s(Ve,{position:"end",children:"minutes"})},double:"true",InputLabelProps:{shrink:!0},placeholder:e.t("SESSION_DURATION")})})]})},ot=n=>{const{children:e,tab:t,index:a,...o}=n;return s("div",{role:"tabpanel",hidden:t!==a,id:`business-tabpanel-${a}`,"aria-labelledby":`business-tab-${a}`,...o,children:t===a&&s(je,{children:e})})},rs=()=>{const n=y(Z),e=y(J),[t,a]=r.useState(0),o=Ft("1",{refetchOnMountOrArgChange:!0}),[c,i]=Ht(),S=W(),p={businessId:void 0,name:"",logoUrl:"",address:"",registrationNumber:"",area:Gt,slotsShift:void 0,daysBlock:void 0,coreHrlUrl:"",bookingTimeOutDays:void 0,sessionDurationMins:void 0,dayShiftStartHour:7,dayShiftEndHour:19,nightShiftStartHour:19,nightShiftEndHour:7,cancellationNoticeDays:void 0},I=E.object({businessId:E.number(),name:E.string().min(1,`${e.t("BUSINESS_NAME")} ${n.t(Ce)}`).max(256),logoUrl:E.string().min(1,`${e.t("LOGO_URL")} ${n.t(Ce)}`).url(n.t(at)),address:E.string().max(256),registrationNumber:E.string().max(256),area:E.string().readonly(),slotsShift:E.number().min(0),daysBlock:E.number().min(0),coreHrlUrl:E.string().min(1,`${e.t("CORE_HR_URL")} ${n.t(Ce)}`).url(n.t(at)),bookingTimeOutDays:E.number().min(0),sessionDurationMins:E.number().min(0),cancellationNoticeDays:E.number().min(0),dayShiftStartHour:E.number().min(0).max(23),dayShiftEndHour:E.number().min(0).max(23),nightShiftStartHour:E.number().min(0).max(23),nightShiftEndHour:E.number().min(0).max(23)}),R=de({mode:"onChange",defaultValues:p,resolver:Se(I)}),{handleSubmit:T,control:k,formState:P,setValue:B,getValues:F}=R,{isValid:A,errors:g,isDirty:v}=P,N=($,G)=>{a(G)},M=$=>{c($)};return r.useEffect(()=>{const{data:$,isError:G,isLoading:q,isSuccess:Y,error:m}=o;return S(H(q)),Y&&$&&Object.keys($).forEach(h=>B(h,$[h])),G&&m&&S(_(L(`${n.t("ERROR_LOADING_DATA")} ${e.t("BUSINESS_INFO")}`,"error"))),()=>Object.keys(p).forEach(h=>B(h,p[h]))},[o]),r.useEffect(()=>{const{isError:$,isLoading:G,isSuccess:q,data:Y,error:m}=i;S(H(G)),q&&Y&&S(_(L(`${e.t("BUSINESS_INFO")} ${n.t("SAVE_SUCCESSFUL")}`,"success"))),$&&m&&S(_(L(`${n.t("SAVE_ERROR")} ${e.t("BUSINESS_INFO")}`,"error")))},[i]),s(Ct,{...R,children:U(as,{handleSubmit:T($=>M($)),children:[U(tt,{mdUp:!0,children:[s(je,{sx:{borderBottom:1,borderColor:"divider",marginBottom:"1rem"},children:U(At,{value:t,onChange:N,children:[s(st,{label:e.t("BUSINESS")}),s(st,{label:e.t("DEFAULT_SETTINGS")})]})}),s(ot,{tab:t,index:0,children:s(nt,{control:k,errors:g,getValues:F})}),s(ot,{tab:t,index:1,children:s(rt,{control:k,errors:g})})]}),U(tt,{mdDown:!0,children:[s(nt,{control:k,errors:g,getValues:F}),s(kt,{title:"Default Settings"}),s(rt,{control:k,errors:g})]}),s(ns,{title:n.t("SAVE"),disabled:!(A&&v)})]})})},os=()=>[{key:"name",title:"BUSINESS_PHASE",canBeSorted:!0},{key:"numberOfLines",title:"NUMBER_OF_LINES",canBeSorted:!0},{key:"minHeadCount",title:"MIN_HEAD_COUNT",canBeSorted:!0}],ls=n=>{const e=y(Z),t=y(J),{highDemandId:a}=n,o=W(),[c,i]=Yt();return r.useEffect(()=>{const{isSuccess:S,isError:p,error:I,isLoading:R}=i;o(H(R)),S&&(setTimeout(()=>{o(_(L(`${t.t("BUSINESS_PHASES")} ${e.t("DELETE_SUCCESSFUL")}`,"success")))},250),o(oe())),I&&p&&o(_(L(`${e.t("DELETE_ERROR")} ${t.t("BUSINESS_PHASES")}`,"error")))},[i]),s(De,{title:`${e.t("DELETE")} ${t.t("BUSINESS_PHASES")}`,actions:[{title:e.t("DELETE"),onClick:()=>{c(a)}}],children:U("div",{className:"flex flex-col px-12",children:[U("p",{className:"mb-10",children:[e.t("DELETE_MSG_1")," ",t.t("BUSINESS_PHASE"),"?"]}),U("p",{className:"mb-32",children:[e.t("DELETE_PREFIX")," ",t.t("BUSINESS_PHASE")," ",e.t("DELETE_MSG_2")]})]})})},Ke=n=>{const e=y(J),t=y(Z),a=W(),{add:o,businessPhaseId:c}=n,[i,S]=r.useState(!0),p=zt(c,{refetchOnMountOrArgChange:!0,skip:i}),[I,R]=Kt(),[T,k]=Jt();r.useEffect(()=>(c&&S(!1),()=>S(!0)),[c]);const P={id:void 0,businessId:1,name:"",numberOfLines:void 0,minHeadCount:void 0},B=E.object({id:E.number().optional(),businessId:E.number().optional(),name:E.string().min(1,`${e.t("BUSINESS_PHASE")} ${t.t("NAME")} ${t.t(Ce)}`).max(256),numberOfLines:E.number().min(1),minHeadCount:E.number().min(1)}),F=de({mode:"onChange",defaultValues:P,resolver:Se(B)}),{handleSubmit:A,control:g,formState:v,setValue:N,reset:M}=F,{isValid:$,errors:G,isDirty:q}=v;r.useEffect(()=>{const{data:m,isSuccess:h,isLoading:d,isError:D,error:O}=p;return a(H(d)),h&&m&&Object.keys(m).forEach(C=>N(C,m[C])),D&&O&&a(_(L(`${t.t("ERROR_LOADING_DATA")} ${e.t("BUSINESS_PHASE")}`,"error"))),()=>Object.keys(P).forEach(C=>N(C,P[C]))},[p]);const Y=m=>{o?I(m):T(m),M(m)};return r.useEffect(()=>{const{isError:m,isLoading:h,isSuccess:d,data:D,error:O}=R;a(H(h)),d&&D&&(setTimeout(()=>{a(_(L(`${e.t("BUSINESS_PHASE")} ${t.t("ADD_SUCCESSFUL")}`,"success")))},250),a(oe())),m&&O&&a(_(L(`${t.t("ADD_ERROR")} ${e.t("BUSINESS_PHASE")}`,"error")))},[R]),r.useEffect(()=>{const{isError:m,isLoading:h,isSuccess:d,data:D,error:O}=k;a(H(h)),d&&D&&(setTimeout(()=>{a(_(L(`${e.t("BUSINESS_PHASE")} ${t.t("SAVE_SUCCESSFUL")}`,"success")))},250),a(oe())),m&&O&&a(_(L(`${t.t("SAVE_ERROR")} ${e.t("BUSINESS_PHASE")}`,"error")))},[k]),U(_e,{isValid:$,isDirty:q,actions:[{title:o?t.t("ADD"):t.t("SAVE"),onClick:A(m=>Y(m))}],handleSubmit:A(m=>Y(m)),title:o?`${t.t("ADD")} ${e.t("BUSINESS_PHASES")}`:`${t.t("EDIT")} ${e.t("BUSINESS_PHASES")}`,children:[s(ae,{control:g,name:"name",label:t.t("NAME"),errors:G,required:!0,InputLabelProps:{shrink:!0},dialog:"true",placeholder:t.t("NAME")}),s(ae,{control:g,name:"numberOfLines",label:e.t("NUMBER_OF_LINES"),errors:G,required:!0,InputLabelProps:{shrink:!0},type:"number",dialog:"true",placeholder:e.t("NUMBER_OF_LINES")}),s(ae,{control:g,name:"minHeadCount",label:e.t("MIN_HEAD_COUNT"),errors:G,required:!0,InputLabelProps:{shrink:!0},type:"number",dialog:"true",placeholder:e.t("MIN_HEAD_COUNT")})]})},is=(n,e)=>[{label:"EDIT",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:edit"}),iconColor:"success",onClick:n},{label:"DELETE",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:delete"}),iconColor:"error",onClick:e}],cs=n=>{const e=W(),{handleSubmit:t,control:a,errors:o}=n,c=y(Z),i=y(J);return s(De,{title:c.t("FILTER")+" "+i.t("BUSINESS_PHASES"),actions:[{title:c.t("FILTER"),onClick:()=>{t(),e(oe())}}],children:s(ae,{control:a,name:"name",label:i.t("BUSINESS_PHASE"),errors:o,InputLabelProps:{shrink:!0},dialog:"true"})})},us=()=>{const[n,e]=r.useState({businessId:1,page:1,pageSize:se,sortBy:"name",sortOrder:z.ASCENDING}),t=y(Z),a=y(J),o=W(),[c,i]=r.useState(!1),[S,p]=r.useState([]),[I,R]=r.useState({currentPage:1,pageSize:se,totalCount:0,totalPages:0}),[T,k]=r.useState(0),P=Ye(n,{refetchOnMountOrArgChange:!0}),B={name:""},F=E.object({name:E.string().optional()}),A=de({mode:"onChange",defaultValues:B,resolver:Se(F)}),{handleSubmit:g,control:v,formState:N,setValue:M}=A,{errors:$}=N;r.useEffect(()=>{const{data:h,isLoading:d,isSuccess:D,isError:O,error:C,isFetching:b}=P;if(o(H(d)),o(H(b)),D&&h){const{totalCount:u,totalPages:l,currentPage:f,data:x,pageSize:V}=h;R(j=>({...j,totalCount:u,totalPages:l,currentPage:f,pageSize:V})),x==null||x.map(j=>{const{id:ee,name:ne,minHeadCount:le,numberOfLines:te}=j;p(K=>{const ge=K;return ge.push({id:ee,actions:!0,name:ne,minHeadCount:le,numberOfLines:te}),ge})}),k(j=>n.filter?j:u)}return O&&C&&o(_(L(`${t.t("ERROR_LOADING_DATA")} ${a.t("BUSINESS_PHASES")}`,"error"))),()=>p([])},[P]),r.useEffect(()=>{i(T>se)},[T]);const G=h=>{const{id:d}=h.target;o(Q({children:s(Ke,{add:!1,businessPhaseId:d})}))},q=h=>{const{id:d}=h.target;o(Q({children:s(ls,{highDemandId:d})}))},Y=(h,d)=>{e(D=>({...D,page:d+1}))},m=(h,d)=>{e(D=>{let O;return D.sortBy===d?D.sortOrder===z.ASCENDING?O=z.DESCENDING:O=z.ASCENDING:O=z.ASCENDING,{...D,sortBy:d,sortOrder:O}})};return U(Re,{title:a.t("BUSINESS_PHASES"),hasAddButton:!0,handleClick:()=>o(Q({children:s(Ke,{add:!0})})),hasFilterButton:c,handleFilterClick:()=>o(Q({children:s(cs,{control:v,errors:$,handleSubmit:g(h=>e(d=>({...d,filter:h.name.length>0?h.name:void 0})))})})),children:[c?s(xe,{hasAddButton:!0,handleFilterClick:g(h=>e(d=>({...d,filter:h.name.length>0?h.name:void 0}))),handleAddClick:()=>o(Q({children:s(Ke,{add:!0})})),children:s(ae,{control:v,name:"name",label:a.t("BUSINESS_PHASE"),errors:$,InputLabelProps:{shrink:!0},InputProps:{endAdornment:s(ss,{onClick:()=>M("name",""),children:s(ce,{className:"text-48",size:24,color:"action",children:"material-outline:close"})})},filter:"true"})}):"",s(Oe,{sortBy:n==null?void 0:n.sortBy,sortOrder:n==null?void 0:n.sortOrder,showId:!1,tableLabel:a.t("BUSINESS_PHASES"),tableHeadings:os(),tableRows:S,t:a.t,hasActions:!0,tableActions:is(G,q),tableInfo:I,handlePageChange:Y,handleSortChange:m,hasFilterButton:c})]})},ds=n=>{const{isLoading:e}=n;return s(Nt,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:e,children:s(Qt,{color:"inherit"})})},Ss=["rejectionReason/fetchAll","rejectionReason/fetchOne"],hs=qe.enhanceEndpoints({addTagTypes:Ss}).injectEndpoints({endpoints:n=>({getAllRejectionReasons:n.query({query:({businessId:e,page:t,pageSize:a,sortBy:o,sortOrder:c,filter:i})=>{let S="?";return t&&(S+=`page=${t}&`),a&&(S+=`pageSize=${a}&`),o&&(S+=`sortBy=${o}&`),c&&(S+=`sortOrder=${c}&`),i&&(S+=`filter=${i}`),{url:`/business/getrejectionreasons/${e}${S}`}},providesTags:["rejectionReason/fetchAll"]}),getOneRejectionReason:n.query({query:e=>({url:`/business/getrejectionreasonsbyid/${e}`}),providesTags:["rejectionReason/fetchOne"]}),postRejectionReason:n.mutation({query:e=>({url:"/business/addrejectionreason",method:"POST",data:e}),invalidatesTags:["rejectionReason/fetchAll"]}),putRejectionReason:n.mutation({query:e=>({url:"/business/updaterejectionreason",method:"PUT",data:e}),invalidatesTags:["rejectionReason/fetchAll","rejectionReason/fetchOne"]}),deleteRejectionReason:n.mutation({query:e=>({url:`/business/deleterejectionreason/${e}`,method:"DELETE"}),invalidatesTags:["rejectionReason/fetchAll"]})})}),{useGetAllRejectionReasonsQuery:fs,useGetOneRejectionReasonQuery:Es,usePostRejectionReasonMutation:ms,usePutRejectionReasonMutation:gs,useDeleteRejectionReasonMutation:Ds}=hs,Je=n=>{const e=y(J),t=y(Z),a=W(),{add:o,rejectionReasonId:c}=n,[i,S]=r.useState(!0),[p,I]=r.useState(!1),R=Es(c,{refetchOnMountOrArgChange:!0,skip:i}),[T,k]=ms(),[P,B]=gs();r.useEffect(()=>(c&&S(!1),()=>S(!0)),[c]);const F={id:void 0,businessId:1,name:""},A=E.object({id:E.number().optional(),businessId:E.number().optional(),name:E.string().min(1,`${e.t("BUSINESS_PHASE")} ${t.t("NAME")} ${t.t(Ce)}`).max(256)}),g=de({mode:"onChange",defaultValues:F,resolver:Se(A)}),{handleSubmit:v,control:N,formState:M,setValue:$,reset:G}=g,{isValid:q,errors:Y,isDirty:m}=M;r.useEffect(()=>{const{data:d,isSuccess:D,isLoading:O,isError:C,error:b}=R;return a(H(O)),D&&d&&Object.keys(d).forEach(u=>$(u,d[u])),C&&b&&a(_(L(`${t.t("ERROR_LOADING_DATA")} ${e.t("REJECTION_REASONS")}`,"error"))),()=>Object.keys(F).forEach(u=>$(u,F[u]))},[R]);const h=d=>{o?T(d):P(d),G(d)};return r.useEffect(()=>{const{isError:d,isLoading:D,isSuccess:O,data:C,error:b}=k;a(H(D)),O&&C&&(setTimeout(()=>{a(_(L(`${e.t("REJECTION_REASONS")} ${t.t("ADD_SUCCESSFUL")}`,"success")))},250),a(oe())),d&&b&&a(_(L(`${t.t("ADD_ERROR")} ${e.t("REJECTION_REASONS")}`,"error")))},[k]),r.useEffect(()=>{const{isError:d,isLoading:D,isSuccess:O,data:C,error:b}=B;a(H(D)),O&&C&&(setTimeout(()=>{a(_(L(`${e.t("REJECTION_REASONS")} ${t.t("SAVE_SUCCESSFUL")}`,"success")))},250),a(oe())),d&&b&&a(_(L(`${t.t("SAVE_ERROR")} ${e.t("REJECTION_REASONS")}`,"error")))},[B]),U(_e,{isValid:q,isDirty:m,actions:[{title:t.t("SAVE"),onClick:v(d=>h(d))}],handleSubmit:v(d=>h(d)),title:o?`${t.t("ADD")} ${e.t("REJECTION_REASONS")}`:`${t.t("EDIT")} ${e.t("REJECTION_REASONS")}`,children:[s(ae,{control:N,name:"name",label:t.t("NAME"),errors:Y,required:!0,InputLabelProps:{shrink:!0},dialog:"true",placeholder:t.t("NAME")}),s(ds,{isLoading:p})]})},bs=()=>[{key:"id",title:"ID",canBeSorted:!0},{key:"name",title:"REJECTION_REASONS",canBeSorted:!0}],ps=n=>{const e=y(Z),t=y(J),{rejectionReasonId:a}=n,o=W(),[c,i]=Ds();return r.useEffect(()=>{const{isSuccess:S,isError:p,error:I,isLoading:R}=i;o(H(R)),S&&(setTimeout(()=>{o(_(L(`${t.t("REJECTION_REASONS")} ${e.t("DELETE_SUCCESSFUL")}`,"success")))},250),o(oe())),I&&p&&o(_(L(`${e.t("DELETE_ERROR")} ${t.t("REJECTION_REASONS")}`,"error")))},[i]),s(De,{title:`${e.t("DELETE")} ${t.t("REJECTION_REASONS")}`,actions:[{title:e.t("DELETE"),onClick:()=>{c(a)}}],children:U("div",{className:"flex flex-col px-12",children:[U("p",{className:"mb-10",children:[e.t("DELETE_MSG_1")," ",t.t("REJECTION_REASONS"),"?"]}),U("p",{className:"mb-32",children:[e.t("DELETE_PREFIX")," ",t.t("REJECTION_REASONS")," ",e.t("DELETE_MSG_2")]})]})})},Is=(n,e)=>[{label:"EDIT",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:edit"}),iconColor:"success",onClick:n},{label:"DELETE",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:delete"}),iconColor:"error",onClick:e}],Os=n=>{const e=W(),{handleSubmit:t,control:a,errors:o}=n,c=y(Z),i=y(J);return s(De,{title:c.t("FILTER")+" "+i.t("REJECTION_REASONS"),actions:[{title:c.t("FILTER"),onClick:()=>{t(),e(oe())}}],children:s(ae,{control:a,name:"name",label:i.t("REJECTION_REASONS"),errors:o,InputLabelProps:{shrink:!0},dialog:"true"})})},Rs=()=>{const[n,e]=r.useState({businessId:1,page:1,pageSize:se,sortBy:"name",sortOrder:z.ASCENDING}),t=y(Z),a=y(J),o=W(),[c,i]=r.useState([]),[S,p]=r.useState(!1),[I,R]=r.useState({currentPage:1,pageSize:se,totalCount:0,totalPages:0}),[T,k]=r.useState(0),P=fs(n,{refetchOnMountOrArgChange:!0}),B={name:""},F=E.object({name:E.string().optional()}),A=de({mode:"onChange",defaultValues:B,resolver:Se(F)}),{handleSubmit:g,control:v,formState:N}=A,{errors:M}=N;r.useEffect(()=>{const{data:m,isLoading:h,isSuccess:d,isError:D,error:O,isFetching:C}=P;if(o(H(h)),o(H(C)),d&&m){const{totalCount:b,totalPages:u,currentPage:l,data:f,pageSize:x}=m;R(V=>({...V,totalCount:b,totalPages:u,currentPage:l,pageSize:x})),f==null||f.map(V=>{const{id:j,name:ee}=V;i(ne=>{const le=ne;return le.push({id:j,actions:!0,name:ee}),le})}),k(V=>n.filter?V:b)}return D&&O&&o(_(L(`${t.t("ERROR_LOADING_DATA")} ${a.t("BUSINESS_PHASES")}`,"error"))),()=>i([])},[P]),r.useEffect(()=>{p(T>se)},[T]);const $=m=>{const{id:h}=m.target;o(Q({children:s(Je,{add:!1,rejectionReasonId:h})}))},G=m=>{const{id:h}=m.target;o(Q({children:s(ps,{rejectionReasonId:h})}))},q=(m,h)=>{e(d=>({...d,page:h+1}))},Y=(m,h)=>{e(d=>{let D;return d.sortBy===h?d.sortOrder===z.ASCENDING?D=z.DESCENDING:D=z.ASCENDING:D=z.ASCENDING,{...d,sortBy:h,sortOrder:D}})};return U(Re,{title:a.t("REJECTION_REASONS"),hasAddButton:!0,handleClick:()=>o(Q({children:s(Je,{add:!0})})),hasFilterButton:S,handleFilterClick:()=>o(Q({children:s(Os,{control:v,errors:M,handleSubmit:g(m=>e(h=>({...h,filter:m.name.length>0?m.name:void 0})))})})),children:[S?s(xe,{hasAddButton:!0,handleFilterClick:g(m=>e(h=>({...h,filter:m.name.length>0?m.name:void 0}))),handleAddClick:()=>o(Q({children:s(Je,{add:!0})})),children:s(ae,{control:v,name:"name",label:a.t("REJECTION_REASONS"),errors:M,InputLabelProps:{shrink:!0},filter:"true"})}):"",s(Oe,{sortBy:n==null?void 0:n.sortBy,sortOrder:n==null?void 0:n.sortOrder,showId:!1,tableLabel:a.t("REJECTION_REASONS"),tableHeadings:bs(),tableRows:c,t:a.t,hasActions:!0,tableActions:Is($,G),tableInfo:I,handlePageChange:q,handleSortChange:Y,hasFilterButton:S})]})},Ts=()=>[{key:"id",title:"ID",canBeSorted:!0},{key:"category",title:"CATEGORY",isConstantTranslation:!0,canBeSorted:!0},{key:"subCategory",title:"SUBCATEGORY",isConstantTranslation:!0,canBeSorted:!0},{key:"maxUsers",title:"MAX_PER_SHIFT",canBeSorted:!0,customSortVar:"maxUsersPerShift"},{key:"roleName",title:"ROLE",isConstantTranslation:!0,canBeSorted:!0}],Xe=n=>{const{control:e,name:t,label:a,errors:o,...c}=n;return s(_t,{name:t,control:e,render:({field:i})=>U("div",{className:"flex flex-row items-center w-full mb-10",children:[s(Xt,{...i,checked:i.value===!0,...c}),s("span",{children:a})]})})},Qe=n=>{const e=y(J),t=y(Z),a=W(),{add:o,userCategoryId:c}=n,[i,S]=r.useState(!0),p=xt(c,{refetchOnMountOrArgChange:!0,skip:i}),I=wt(void 0,{refetchOnMountOrArgChange:!0}),[R,T]=r.useState([]),[k,P]=Mt(),[B,F]=Vt();r.useEffect(()=>(c&&S(!1),()=>S(!0)),[c]);const A={id:void 0,businessId:1,category:"",subCategory:"",roleId:1,roleName:"",maxUsers:1,isMETL:!1,isPTL:!1},g=E.object({id:E.number().optional(),businessId:E.number().optional(),category:E.string().min(1,`${t.t("CATEGORY")} ${t.t(Ce)}`),subCategory:E.string().optional(),maxUsers:E.number().min(1),roleId:E.number(),roleName:E.string().optional(),isMETL:E.boolean(),isPTL:E.boolean()}),v=de({mode:"onChange",defaultValues:A,resolver:Se(g)}),{handleSubmit:N,control:M,formState:$,setValue:G,reset:q}=v,{isValid:Y,errors:m,isDirty:h}=$;r.useEffect(()=>{const{data:D,isSuccess:O,isLoading:C,isError:b,error:u}=I;return a(H(C)),O&&D&&D.map(l=>T(f=>{let x=f;return x.push({label:l.name,value:l.id}),x})),b&&u&&a(_(L(`${t.t("ERROR_LOADING_DATA")} ${t.t("ROLE")}`,"error"))),()=>T([])},[I]),r.useEffect(()=>{const{data:D,isSuccess:O,isLoading:C,isError:b,error:u}=p;return a(H(C)),O&&D&&Object.keys(D).forEach(l=>G(l,D[l])),b&&u&&a(_(L(`${t.t("ERROR_LOADING_DATA")} ${e.t("USER_CATEGORY")}`,"error"))),()=>Object.keys(A).forEach(l=>G(l,A[l]))},[p]);const d=D=>{o?k(D):B(D),q(D)};return r.useEffect(()=>{const{isError:D,isLoading:O,isSuccess:C,data:b,error:u}=P;a(H(O)),C&&b&&(setTimeout(()=>{a(_(L(`${e.t("USER_CATEGORY")} ${t.t("ADD_SUCCESSFUL")}`,"success")))},250),a(oe())),D&&u&&a(_(L(`${t.t("ADD_ERROR")} ${e.t("USER_CATEGORY")}`,"error")))},[P]),r.useEffect(()=>{const{isError:D,isLoading:O,isSuccess:C,data:b,error:u}=F;a(H(O)),C&&b&&(setTimeout(()=>{a(_(L(`${e.t("USER_CATEGORY")} ${t.t("SAVE_SUCCESSFUL")}`,"success")))},250),a(oe())),D&&u&&a(_(L(`${t.t("SAVE_ERROR")} ${e.t("USER_CATEGORY")}`,"error")))},[F]),U(_e,{isDirty:h,isValid:Y,actions:[{title:o?t.t("ADD"):t.t("SAVE"),onClick:N(D=>d(D))}],handleSubmit:N(D=>d(D)),title:o?`${t.t("ADD")} ${e.t("USER_CATEGORIES")}`:`${t.t("EDIT")} ${e.t("USER_CATEGORIES")}`,children:[s(ae,{control:M,name:"category",label:t.t("NAME"),errors:m,required:!0,InputLabelProps:{shrink:!0},dialog:"true",placeholder:t.t("NAME")}),s(Ae,{selectList:R,control:M,name:"roleId",label:t.t("ROLE"),errors:m,required:!0,type:"number",InputLabelProps:{shrink:!0},dialog:"true",placeholder:t.t("ROLE")}),s(ae,{control:M,name:"subCategory",label:t.t("SUBCATEGORY"),errors:m,InputLabelProps:{shrink:!0},dialog:"true",placeholder:t.t("SUBCATEGORY")}),s(ae,{control:M,name:"maxUsers",label:e.t("MAX_USERS_PER_SHIFT"),errors:m,required:!0,InputLabelProps:{shrink:!0},dialog:"true",type:"number",placeholder:e.t("MAX_USERS_PER_SHIFT")}),U("div",{className:"flex flex-row w-full",children:[s(Xe,{control:M,name:"isMETL",label:e.t("IS_METL"),errors:m}),s(Xe,{control:M,name:"isPTL",label:e.t("IS_PTL"),errors:m})]})]})},As=n=>{const e=y(Z),t=y(J),{userCategoryId:a}=n,o=W(),[c,i]=jt();return r.useEffect(()=>{const{isSuccess:S,isError:p,error:I,isLoading:R}=i;o(H(R)),S&&(setTimeout(()=>{o(_(L(`${t.t("USER_CATEGORY")} ${e.t("DELETE_SUCCESSFUL")}`,"success")))},250),o(oe())),I&&p&&o(_(L(`${e.t("DELETE_ERROR")} ${t.t("USER_CATEGORY")}`,"error")))},[i]),s(De,{title:`${e.t("DELETE")} ${t.t("USER_CATEGORIES")}`,actions:[{title:e.t("DELETE"),onClick:()=>{c(a)}}],children:U("div",{className:"flex flex-col px-12",children:[U("p",{className:"mb-10",children:[e.t("DELETE_MSG_1")," ",t.t("USER_CATEGORY"),"?"]}),U("p",{className:"mb-32",children:[e.t("DELETE_PREFIX")," ",t.t("USER_CATEGORY")," ",e.t("DELETE_MSG_2")]})]})})},Cs=(n,e)=>[{label:"EDIT",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:edit"}),iconColor:"success",onClick:n},{label:"DELETE",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:delete"}),iconColor:"error",onClick:e}],Ns=()=>{const[n,e]=r.useState({businessId:1,page:1,pageSize:se,sortBy:"category",sortOrder:z.ASCENDING}),[t,a]=r.useState({currentPage:1,pageSize:se,totalCount:0,totalPages:0}),o=y(Z),c=y(J),i=W(),[S,p]=r.useState([]),[I,R]=r.useState(0),[T,k]=r.useState(!1),P=qt(n,{refetchOnMountOrArgChange:!0}),B={category:""},F=E.object({category:E.string().optional()}),A=de({mode:"onChange",defaultValues:B,resolver:Se(F)}),{handleSubmit:g,control:v,formState:N,setValue:M}=A,{errors:$}=N;r.useEffect(()=>{const{data:h,isLoading:d,isSuccess:D,isError:O,error:C,isFetching:b}=P;if(i(H(d)),i(H(b)),D&&h){const{totalCount:u,totalPages:l,currentPage:f,data:x,pageSize:V}=h;a(j=>({...j,totalCount:u,totalPages:l,currentPage:f,pageSize:V})),x.map(j=>{const{id:ee,category:ne,subCategory:le,maxUsers:te,roleName:K}=j;p(ge=>{const re=ge;return re.push({id:ee,actions:!0,category:ne,subCategory:le,maxUsers:te,roleName:K}),re})}),R(j=>n.filter?j:u)}return O&&C&&i(_(L(`${o.t("ERROR_LOADING_DATA")} ${c.t("USER_CATEGORIES")}`,"error"))),()=>p([])},[P]),r.useEffect(()=>{k(I>se)},[I]);const G=h=>{const{id:d}=h.target;i(Q({children:s(Qe,{add:!1,userCategoryId:d})}))},q=h=>{const{id:d}=h.target;i(Q({children:s(As,{userCategoryId:d})}))},Y=(h,d)=>{e(D=>({...D,page:d+1}))},m=(h,d)=>{e(D=>{let O;return D.sortBy===d?D.sortOrder===z.ASCENDING?O=z.DESCENDING:O=z.ASCENDING:O=z.ASCENDING,{...D,sortBy:d,sortOrder:O}})};return U(Re,{title:c.t("USER_CATEGORIES"),hasAddButton:!0,handleClick:()=>i(Q({children:s(Qe,{add:!0})})),hasFilterButton:T,children:[T?s(xe,{hasAddButton:!0,handleFilterClick:g(h=>e(d=>({...d,filter:h.category.length>0?h.category:void 0}))),handleAddClick:()=>i(Q({children:s(Qe,{add:!0})})),children:s(ae,{control:v,name:"category",label:o.t("CATEGORY"),errors:$,InputLabelProps:{shrink:!0},InputProps:{endAdornment:s(ct,{onClick:()=>M("category",""),children:s(ce,{className:"text-48",size:24,color:"action",children:"material-outline:close"})})},filter:"true"})}):"",s(Oe,{sortBy:n==null?void 0:n.sortBy,sortOrder:n==null?void 0:n.sortOrder,showId:!0,tableLabel:c.t("USER_CATEGORIES"),tableHeadings:Ts(),tableRows:S,t:c.t,hasActions:!0,tableActions:Cs(G,q),tableInfo:t,handlePageChange:Y,handleSortChange:m,hasFilterButton:T})]})},_s=()=>[{key:"start",title:"START",isDate:!0,isConstantTranslation:!0,canBeSorted:!0,customSortVar:"allowedStartDate"},{key:"end",title:"END",isDate:!0,isConstantTranslation:!0,canBeSorted:!0,customSortVar:"allowedEndDate"},{key:"periodStart",title:"PERIOD_START",isDate:!0,isConstantTranslation:!0,canBeSorted:!0,customSortVar:"targetPeriodStart"},{key:"periodEnd",title:"PERIOD_END",isDate:!0,isConstantTranslation:!0,canBeSorted:!0,customSortVar:"targetPeriodEnd"}],Ls=["slotReleaseSchedule/fetchAll","slotReleaseSchedule/fetchOne"],ys=qe.enhanceEndpoints({addTagTypes:Ls}).injectEndpoints({endpoints:n=>({getAllSlotReleaseSchedules:n.query({query:({businessId:e,page:t,pageSize:a,sortBy:o,sortOrder:c,filter:i})=>{let S="?";return t&&(S+=`page=${t}&`),a&&(S+=`pageSize=${a}&`),o&&(S+=`sortBy=${o}&`),c&&(S+=`sortOrder=${c}&`),i&&(S+=`filter=${i}`),{url:`/settings/getslotreleaseschedules/${e}${S}`}},providesTags:["slotReleaseSchedule/fetchAll"]}),getOneSlotReleaseSchedule:n.query({query:e=>({url:`/settings/getslotreleaseschedulesbyid/${e}`}),providesTags:["slotReleaseSchedule/fetchOne"]}),postSlotReleaseSchedule:n.mutation({query:e=>({url:"/settings/addslotreleaseschedules",method:"POST",data:e}),invalidatesTags:["slotReleaseSchedule/fetchAll"]}),putSlotReleaseSchedule:n.mutation({query:e=>({url:"/settings/updateslotreleaseschedules",method:"PUT",data:e}),invalidatesTags:["slotReleaseSchedule/fetchAll","slotReleaseSchedule/fetchOne"]}),deleteSlotReleaseSchedule:n.mutation({query:e=>({url:`/settings/deleteslotreleaseschedules/${e}`,method:"DELETE"}),invalidatesTags:["slotReleaseSchedule/fetchAll"]})})}),{useGetAllSlotReleaseSchedulesQuery:Ps,useGetOneSlotReleaseScheduleQuery:vs,usePostSlotReleaseScheduleMutation:$s,usePutSlotReleaseScheduleMutation:Bs,useDeleteSlotReleaseScheduleMutation:Fs}=ys,lt=n=>{const e=y(J),t=y(Z),a=W(),{add:o,slotReleaseScheduleId:c}=n,[i,S]=r.useState(!0),[p,I]=r.useState(!1),R=vs(c,{refetchOnMountOrArgChange:!0,skip:i}),[T,k]=$s(),[P,B]=Bs();r.useEffect(()=>(c&&S(!1),()=>S(!0)),[c]);const F={id:void 0,businessId:1,start:new Date,end:new Date,periodStart:new Date,periodEnd:new Date},A=E.object({id:E.number().optional(),businessId:E.number().optional(),start:E.date(),end:E.date(),periodStart:E.date(),periodEnd:E.date()}),g=de({mode:"onChange",defaultValues:F,resolver:Se(A)}),{handleSubmit:v,control:N,formState:M,setValue:$,reset:G}=g,{isValid:q,errors:Y,isDirty:m}=M;r.useEffect(()=>{const{data:d,isSuccess:D,isLoading:O,isError:C,error:b}=R;return I(O),a(H(O)),D&&d&&Object.keys(d).forEach(u=>{typeof d[u]=="string"&&Ee(d[u]).isValid()?$(u,new Date(d[u])):$(u,d[u])}),C&&b&&a(_(L(`${t.t("ERROR_LOADING_DATA")} ${e.t("BOOKINGS_SCHEDULE")}`,"error"))),()=>Object.keys(F).forEach(u=>$(u,F[u]))},[R]);const h=d=>{o?T(d):P(d),G(d)};return r.useEffect(()=>{const{isError:d,isLoading:D,isSuccess:O,data:C,error:b}=k;a(H(D)),O&&C&&(setTimeout(()=>{a(_(L(`${e.t("BOOKINGS_SCHEDULE")} ${t.t("ADD_SUCCESSFUL")}`,"success")))},250),a(oe())),d&&b&&a(_(L(`${t.t("ADD_ERROR")} ${e.t("BOOKINGS_SCHEDULE")}`,"error")))},[k]),r.useEffect(()=>{const{isError:d,isLoading:D,isSuccess:O,data:C,error:b}=B;a(H(D)),O&&C&&(setTimeout(()=>{a(_(L(`${e.t("BOOKINGS_SCHEDULE")} ${t.t("SAVE_SUCCESSFUL")}`,"success")))},250),a(oe())),d&&b&&a(_(L(`${t.t("SAVE_ERROR")} ${e.t("BOOKINGS_SCHEDULE")}`,"error")))},[B]),U(_e,{isDirty:m,isValid:q,actions:[{title:t.t("SAVE"),onClick:v(d=>h(d))}],handleSubmit:v(d=>h(d)),title:o?`${t.t("ADD")} ${e.t("BOOKINGS_SCHEDULE")}`:`${t.t("EDIT")} ${e.t("BOOKINGS_SCHEDULE")}`,children:[s(me,{control:N,name:"start",label:t.t("ALLOWED_START")+" *",errors:Y,slotProps:{textField:{InputLabelProps:{shrink:!0}}},dialog:"true"}),s(me,{control:N,name:"periodStart",label:`${t.t("HOLIDAY")} ${t.t("PERIOD_START")} *`,errors:Y,slotProps:{textField:{InputLabelProps:{shrink:!0}}},dialog:"true"}),s(me,{control:N,name:"end",label:t.t("ALLOWED_END")+" *",errors:Y,slotProps:{textField:{InputLabelProps:{shrink:!0}}},dialog:"true"}),s(me,{control:N,name:"periodEnd",label:`${t.t("HOLIDAY")} ${t.t("PERIOD_END")} *`,errors:Y,slotProps:{textField:{InputLabelProps:{shrink:!0}}},dialog:"true"})]})},Hs=n=>{const e=y(Z),t=y(J),{slotReleaseScheduleId:a}=n,o=W(),[c,i]=Fs();return r.useEffect(()=>{const{isSuccess:S,isError:p,error:I,isLoading:R}=i;o(H(R)),S&&(setTimeout(()=>{o(_(L(`${t.t("BOOKINGS_SCHEDULE")} ${e.t("DELETE_SUCCESSFUL")}`,"success")))},250),o(oe())),I&&p&&o(_(L(`${e.t("DELETE_ERROR")} ${t.t("BOOKINGS_SCHEDULE")}`,"error")))},[i]),s(De,{title:`${e.t("DELETE")} ${t.t("BOOKINGS_SCHEDULE")}`,actions:[{title:e.t("DELETE"),onClick:()=>{c(a)}}],children:U("div",{className:"flex flex-col px-12",children:[U("p",{className:"mb-10",children:[e.t("DELETE_MSG_1")," ",t.t("BOOKINGS_SCHEDULE"),"?"]}),U("p",{className:"mb-32",children:[e.t("DELETE_PREFIX")," ",t.t("BOOKINGS_SCHEDULE")," ",e.t("DELETE_MSG_2")]})]})})},Us=(n,e)=>[{label:"EDIT",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:edit"}),iconColor:"success",onClick:n},{label:"DELETE",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:delete"}),iconColor:"error",onClick:e}],ks=()=>{const[n,e]=r.useState({businessId:1,page:1,pageSize:se,sortBy:"allowedStartDate",sortOrder:z.ASCENDING}),[t,a]=r.useState({currentPage:1,pageSize:se,totalCount:0,totalPages:0}),o=y(Z),c=y(J),i=W(),[S,p]=r.useState([]),[I,R]=r.useState(0),T=Ps(n,{refetchOnMountOrArgChange:!0});r.useEffect(()=>{const{data:A,isLoading:g,isSuccess:v,isError:N,error:M,isFetching:$}=T;if(i(H($)),i(H(g)),v&&A){const{totalCount:G,totalPages:q,currentPage:Y,data:m,pageSize:h}=A;a(d=>({...d,totalCount:G,totalPages:q,currentPage:Y,pageSize:h})),m.map(d=>{const{id:D,start:O,end:C,periodStart:b,periodEnd:u}=d;p(l=>{const f=l;return f.push({id:D,actions:!0,start:O,end:C,periodStart:b,periodEnd:u}),f})}),R(d=>n.filter?d:G)}return N&&M&&i(_(L(`${o.t("ERROR_LOADING_DATA")} ${c.t("BOOKINGS_SCHEDULE")}`,"error"))),()=>p([])},[T]);const k=A=>{const{id:g}=A.target;i(Q({children:s(lt,{add:!1,slotReleaseScheduleId:g})}))},P=A=>{const{id:g}=A.target;i(Q({children:s(Hs,{slotReleaseScheduleId:g})}))},B=(A,g)=>{e(v=>({...v,page:g+1}))},F=(A,g)=>{e(v=>{let N;return v.sortBy===g?v.sortOrder===z.ASCENDING?N=z.DESCENDING:N=z.ASCENDING:N=z.ASCENDING,{...v,sortBy:g,sortOrder:N}})};return s(Re,{title:c.t("BOOKINGS_SCHEDULE"),hasAddButton:!0,handleClick:()=>i(Q({children:s(lt,{add:!0})})),children:s(Oe,{sortBy:n==null?void 0:n.sortBy,sortOrder:n==null?void 0:n.sortOrder,showId:!1,tableLabel:c.t("BOOKINGS_SCHEDULE"),tableHeadings:_s(),tableRows:S,t:c.t,hasActions:!0,tableActions:Us(k,P),tableInfo:t,handlePageChange:B,handleSortChange:F})})},Gs=()=>[{key:"businessPhaseName",title:"PHASE",customSortVar:"phase"},{key:"dailyDate",title:"DATE",isConstantTranslation:!0},{key:"shiftName",title:"SHIFT",customSortVar:"shift"},{key:"holidayBook",title:"HOLIDAY_BOOK"},{key:"slots",title:"SLOTS_LEFT"}],xs=["dailySlot/fetchAll","dailySlot/fetchOne","slotOverrides/fetchAll","slotOverrides/fetchOne"],ws=qe.enhanceEndpoints({addTagTypes:xs}).injectEndpoints({endpoints:n=>({getAllDailySlots:n.query({query:({businessId:e,page:t,pageSize:a,filter:o,businessPhaseId:c,shiftId:i,startDate:S,endDate:p})=>{let I="?";const R=T=>Ee(T).format("MM/DD/YYYY");if(t&&(I+=`page=${t}&`),a&&(I+=`pageSize=${a}&`),o&&(I+=`filter=${o}&`),c&&(I+=`businessPhaseId=${c}&`),i&&(I+=`shiftId=${i}&`),S){let T=R(S);I+=`startDate=${T}&`}if(p){let T=R(p);I+=`endDate=${T}`}return{url:`/business/getdailyslots/${e}${I}`}},providesTags:["dailySlot/fetchAll"]}),getAllSlotOverrides:n.query({query:({businessId:e,page:t,pageSize:a,sortBy:o,sortOrder:c,filter:i,businessPhaseId:S,shiftId:p,startDate:I,endDate:R})=>{let T="?";const k=P=>Ee(P).format("MM/DD/YYYY");if(t&&(T+=`page=${t}&`),a&&(T+=`pageSize=${a}&`),o&&(T+=`sortBy=${o}&`),c&&(T+=`sortOrder=${c}&`),i&&(T+=`filter=${i}&`),S&&(T+=`businessPhaseId=${S}&`),p&&(T+=`shiftId=${p}&`),I){let P=k(I);T+=`startDate=${P}&`}if(R){let P=k(R);T+=`endDate=${P}`}return{url:`/business/getslotoverrides/${e}${T}`}},providesTags:["slotOverrides/fetchAll","dailySlot/fetchAll"]}),getOneSlotOverride:n.query({query:e=>({url:`/business/getslotoverridesbyid/${e}`}),providesTags:["slotOverrides/fetchOne"]}),postSlotOverride:n.mutation({query:e=>({url:"/business/addslotoverride",method:"POST",data:e}),invalidatesTags:["slotOverrides/fetchAll","dailySlot/fetchAll"]}),putSlotOverride:n.mutation({query:e=>({url:"/business/updateslotoverride",method:"PUT",data:e}),invalidatesTags:["slotOverrides/fetchAll","dailySlot/fetchAll"]}),deleteSlotOverride:n.mutation({query:e=>({url:`/business/deleteslotoverride/${e}`,method:"DELETE"}),invalidatesTags:["slotOverrides/fetchAll","dailySlot/fetchAll"]})})}),{useGetAllDailySlotsQuery:Ms,useGetAllSlotOverridesQuery:Vs,useGetOneSlotOverrideQuery:js,usePostSlotOverrideMutation:qs,usePutSlotOverrideMutation:Ys,useDeleteSlotOverrideMutation:zs}=ws,St=n=>{const{control:e,errors:t,setValue:a}=n,o=W(),c=y(Z),i=y(J),[S,p]=r.useState({businessId:1,pageSize:se,sortBy:"name",sortOrder:z.ASCENDING,page:1}),I=Ye(S),[R,T]=r.useState([]),[k,P]=r.useState(0),[B,F]=r.useState(),[A,g]=r.useState({businessId:1,pageSize:se,sortBy:"name",sortOrder:z.ASCENDING,page:1}),[v,N]=r.useState(!0),M=We(A,{refetchOnMountOrArgChange:!0,skip:v}),[$,G]=r.useState([]),[q,Y]=r.useState(0),[m,h]=r.useState(),[d,D]=r.useState();r.useEffect(()=>{const{isSuccess:l,data:f,isLoading:x,isFetching:V,isError:j,error:ee}=I;if(o(H(x)),o(H(V)),l&&f){const{data:ne,totalCount:le}=f;ne.map(te=>{R.filter(K=>K.value==te.id).length===0&&T(K=>[...K,{label:te.name,value:te.id}])}),P(te=>S.filter?te:le)}j&&ee&&o(_(L(`${c.t("ERROR_LOADING_DATA")} ${i.t("BUSINESS_PHASES")}`,"error")))},[I]);const O=()=>{R.length<k&&p(l=>({...l,page:l.page+1,filter:void 0}))},C=l=>{l&&setTimeout(()=>p(f=>({...f,filter:l})),500)};r.useEffect(()=>{B?(N(!1),g(l=>({...l,businessPhaseId:B.value}))):B===null&&(N(!0),G([]),h(null),a("shiftId",void 0)),B&&m&&Object.keys(B).length&&Object.keys(m).length&&(h(null),a("shiftId",void 0))},[B]),r.useEffect(()=>{const{isSuccess:l,data:f,isLoading:x,isFetching:V,isError:j,error:ee}=M;if(o(H(x)),o(H(V)),l&&f){const{data:ne,totalCount:le}=f,te=ne.map(K=>({label:K.name,value:K.id}));G([...te]),Y(K=>A.filter?K:le)}j&&ee&&o(_(L(`${c.t("ERROR_LOADING_DATA")} ${i.t("SHIFT")}`,"error")))},[M]);const b=()=>{$.length<q&&g(l=>({...l,page:l.page+1,filter:void 0}))},u=l=>{l&&setTimeout(()=>g(f=>({...f,filter:l})),500)};return r.useEffect(()=>{if($.length>0){const l=$.filter(f=>f.value===d)[0];l&&(a("shiftId",l),h(l),D(null))}else d===null&&h(null)},[$]),r.useEffect(()=>{const l=localStorage.getObject("dailySlots");if(l){const{businessPhaseId:f,startDate:x,endDate:V,shiftId:j}=l;D(l.shiftId.value),F({label:f.label,value:f.value}),a("businessPhaseId",{label:f.label,value:f.value}),h({label:j.label,value:j.value}),a("startDate",new Date(x)),a("endDate",new Date(V))}},[]),U(Ge,{children:[s(Ne,{control:e,name:"businessPhaseId",label:i.t("PHASE"),errors:t,selectList:R,type:"string",filter:"true",InputLabelProps:{shrink:!0},onScrollFunc:O,onInputChange:C,onSelectState:F}),s(Ne,{control:e,name:"shiftId",label:i.t("SHIFT"),errors:t,selectList:$,type:"string",filter:"true",InputLabelProps:{shrink:!0},onScrollFunc:b,onInputChange:u,onSelectState:h,selectedState:m}),s(me,{control:e,name:"startDate",label:c.t("DATE_START"),errors:t,slotProps:{textField:{InputLabelProps:{shrink:!0}}},filter:"true"}),s(me,{control:e,name:"endDate",label:c.t("DATE_END"),errors:t,slotProps:{textField:{InputLabelProps:{shrink:!0}}},filter:"true"})]})},Ks=n=>{const e=W(),{submitFilter:t}=n,a=y(Z),o=y(J),c={businessPhaseId:null,shiftId:null,startDate:new Date,endDate:new Date},i=E.object({id:E.number().optional(),businessId:E.number().optional(),businessPhaseId:E.any().refine(g=>g!=null,{message:"Phase must be selected"}),shiftId:E.any().refine(g=>g!=null,{message:"Shift must be selected"}),startDate:E.date(),endDate:E.date()}).refine(g=>g.startDate<=g.endDate,{message:"End date must be after start date",path:["endDate"]}),S=de({mode:"onChange",defaultValues:c,resolver:Se(i)}),{handleSubmit:p,control:I,formState:R,setValue:T,reset:k,getValues:P}=S,{isValid:B,errors:F,isDirty:A}=R;return s(De,{title:a.t("FILTER")+" "+o.t("DAILY_SLOTS"),isDirty:A,isValid:B,isForm:!0,actions:[{title:a.t("FILTER"),onClick:()=>{const g=P();console.log(g),t(g),e(oe())}}],children:s(St,{control:I,errors:F,setValue:T})})},ke=n=>{const e=y(J),t=y(Z),a=W(),{add:o,slotOverrideId:c,data:i,fromDailySlots:S,dailyDate:p}=n,[I,R]=r.useState(!0),T=js(c,{refetchOnMountOrArgChange:!0,skip:I}),[k,P]=qs(),[B,F]=Ys(),[A,g]=r.useState({businessId:1,pageSize:se,sortBy:"name",sortOrder:z.ASCENDING,page:1}),v=Ye(A),[N,M]=r.useState([]),[$,G]=r.useState(0),[q,Y]=r.useState(),[m,h]=r.useState({businessId:1,pageSize:se,sortBy:"name",sortOrder:z.ASCENDING,page:1}),[d,D]=r.useState(!0),O=We(m,{refetchOnMountOrArgChange:!0,skip:d}),[C,b]=r.useState([]),[u,l]=r.useState(0),[f,x]=r.useState(),[V,j]=r.useState();r.useEffect(()=>(c&&R(!1),()=>R(!0)),[c]);const ee={id:void 0,businessId:1,businessPhaseId:o?void 0:{},businessPhaseName:"",shiftId:o?void 0:{},shiftName:"",startDate:p||new Date,endDate:p||new Date,slots:null},ne=E.object({id:E.number().optional(),businessId:E.number().optional(),businessPhaseId:E.any(),shiftId:E.any(),startDate:E.date().optional(),endDate:E.date().optional(),slots:E.number()}),le=de({mode:"onChange",defaultValues:ee,resolver:Se(ne)}),{handleSubmit:te,control:K,formState:ge,setValue:re,reset:Le}=le,{isValid:ye,errors:be,isDirty:Te}=ge,Pe=w=>{const X={...w,businessPhaseId:q.value,shiftId:f.value};if(o)if(S){const ue=Ee(X.startDate).add("d",1).toDate();k({...X,startDate:ue,endDate:ue})}else{const ue=Ee(X.startDate).add("d",1).toDate(),he=Ee(X.endDate).add("d",1).toDate();k({...X,startDate:ue,endDate:he})}else B(X);Le(w)};r.useEffect(()=>{const{isError:w,isLoading:X,isSuccess:ue,data:he,error:fe}=P;a(H(X)),ue&&he&&(setTimeout(()=>{a(_(L(`${e.t("SLOT_OVERRIDES")} ${t.t("ADD_SUCCESSFUL")}`,"success")))},250),a(oe())),w&&fe&&a(_(L(`${t.t("ADD_ERROR")} ${e.t("SLOT_OVERRIDES")}`,"error")))},[P]),r.useEffect(()=>{const{isError:w,isLoading:X,isSuccess:ue,data:he,error:fe}=F;a(H(X)),ue&&he&&(setTimeout(()=>{a(_(L(`${e.t("SLOT_OVERRIDES")} ${t.t("SAVE_SUCCESSFUL")}`,"success")))},250),a(oe())),w&&fe&&a(_(L(`${t.t("SAVE_ERROR")} ${e.t("SLOT_OVERRIDES")}`,"error")))},[F]),r.useEffect(()=>{const{isSuccess:w,data:X,isLoading:ue,isFetching:he,isError:fe,error:ie}=v;if(a(H(ue)),a(H(he)),w&&X){const{totalCount:ze}=X;X.data.map(Ie=>{N.filter(He=>He.value==Ie.id).length===0&&M(He=>[...He,{label:Ie.name,value:Ie.id}])}),G(Ie=>A.filter?Ie:ze)}fe&&ie&&a(_(L(`${t.t("ERROR_LOADING_DATA")} ${e.t("BUSINESS_PHASES")}`,"error")))},[v]);const ve=()=>{N.length<$&&g(w=>({...w,page:w.page+1,filter:void 0}))},$e=w=>{w&&setTimeout(()=>g(X=>({...X,filter:w})),500)};r.useEffect(()=>{q?(D(!1),h(w=>({...w,businessPhaseId:q.value}))):q===null&&(D(!0),b([]),x(null),re("shiftId",void 0)),q&&f&&Object.keys(q).length&&Object.keys(f).length&&(x(null),re("shiftId",void 0))},[q]),r.useEffect(()=>{const{isSuccess:w,data:X,isLoading:ue,isFetching:he,isError:fe,error:ie}=O;if(a(H(ue)),a(H(he)),w&&X){const{data:ze,totalCount:Ie}=X,He=ze.map(we=>({label:we.name,value:we.id}));b([...He]),l(we=>m.filter?we:Ie)}fe&&ie&&a(_(L(`${t.t("ERROR_LOADING_DATA")} ${e.t("SHIFT")}`,"error"))),i&&S&&j(i.shiftId)},[O]),r.useEffect(()=>{if(C.length>0){const w=C.filter(X=>X.value===V)[0];w&&(re("shiftId",w),x(w),j(null))}else V===null&&x(null)},[C]);const Be=()=>{C.length<u&&h(w=>({...w,page:w.page+1,filter:void 0}))},Fe=w=>{w&&setTimeout(()=>h(X=>({...X,filter:w})),500)};return r.useEffect(()=>{const{data:w,isSuccess:X,isLoading:ue,isError:he,error:fe}=T;return a(H(ue)),X&&w&&(Object.keys(w).forEach(ie=>{typeof w[ie]=="string"&&Ee(w[ie]).isValid()?re(ie,new Date(w[ie])):re(ie,w[ie])}),j(w.shiftId),re("businessPhaseId",N.filter(ie=>ie.value===w.businessPhaseId)[0]),Y({label:w.businessPhaseName,value:w.businessPhaseId})),he&&fe instanceof Lt&&(fe.response.status===404&&fe.response.data==="The override slots not found"||a(_(L(`${t.t("ERROR_LOADING_DATA")} ${e.t("SLOT_OVERRIDES")}`,"error")))),()=>Object.keys(ee).forEach(ie=>re(ie,ee[ie]))},[T]),r.useEffect(()=>{i&&re("slots",i.slots)},[i]),r.useEffect(()=>{o&&Y(N.filter(w=>w.value===1)[0])},[N]),U(_e,{isValid:ye,isDirty:Te,handleSubmit:te(w=>Pe(w)),title:o?`${t.t("ADD")} ${e.t("SLOT_OVERRIDE")}`:`${t.t("EDIT")} ${e.t("SLOT_OVERRIDE")}`,children:[U("div",{className:"flex md:flex-row flex-col w-full md:gap-24",children:[s("div",{className:"flex-1",children:s(Ne,{control:K,name:"businessPhaseId",label:e.t("PHASE"),errors:be,selectList:N,type:"string",dialog:"true",InputLabelProps:{shrink:!0},onScrollFunc:ve,onInputChange:$e,onSelectState:Y,required:!0,defaultValue:S?{label:i.businessPhaseName,value:i.businessPhaseId}:null})}),s("div",{className:"flex-1",children:s(Ne,{control:K,name:"shiftId",label:e.t("SHIFT"),errors:be,selectList:C,type:"string",filter:"true",InputLabelProps:{shrink:!0},onScrollFunc:Be,onInputChange:Fe,onSelectState:x,selectedState:f,required:!0,defaultValue:S?{label:i.shiftName,value:i.shiftId}:null})}),s("div",{className:"flex-1",children:s(ae,{control:K,name:"slots",label:e.t("ALLOCATION"),errors:be,required:!0,InputLabelProps:{shrink:!0},type:"number",placeholder:e.t("ALLOCATION"),dialog:"true"})})]}),U("div",{className:"flex md:flex-row w-full md:gap-24 flex-col",children:[s("div",{className:"flex-1",children:s(me,{control:K,name:"startDate",label:t.t("DATE_START"),errors:be,slotProps:{textField:{InputLabelProps:{shrink:!0}}},filter:"true"})}),s("div",{className:"flex-1",children:s(me,{control:K,name:"endDate",label:t.t("DATE_END"),errors:be,slotProps:{textField:{InputLabelProps:{shrink:!0}}},filter:"true",disabled:S})})]}),s("div",{className:"flex flex-row w-full gap-24",children:s("div",{className:"flex-1",children:s(ct,{className:"rounded-md w-full",color:"secondary",variant:"contained",disabled:!(ye&&Te),type:"submit",children:t.t("SAVE")})})})]})},Js=n=>[{label:"ADD",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:add_circle_outline"}),iconColor:"info",onClick:n}],Qs=n=>[{label:"EDIT",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:edit"}),iconColor:"success",onClick:n}],Xs="hasSlotOverride",Ws="slotOverrideId",Zs=()=>{const[n,e]=r.useState({businessId:1,page:1,pageSize:se}),[t,a]=r.useState(!1),o=y(Z),c=y(J),i=W(),[S,p]=r.useState([]),[I,R]=r.useState({currentPage:1,pageSize:se,totalCount:0,totalPages:0}),[T,k]=r.useState(0),[P,B]=r.useState(!0),F=Ms(n,{refetchOnMountOrArgChange:!0,skip:P}),A={businessPhaseId:null,shiftId:null,startDate:new Date,endDate:new Date},g=E.object({id:E.number().optional(),businessId:E.number().optional(),businessPhaseId:E.any().refine(u=>u!=null,{message:"Phase must be selected"}),shiftId:E.any().refine(u=>u!=null,{message:"Shift must be selected"}),startDate:E.date(),endDate:E.date()}).refine(u=>u.startDate<=u.endDate,{message:"End date must be after start date",path:["endDate"]}),v=de({mode:"onChange",defaultValues:A,resolver:Se(g)}),{handleSubmit:N,control:M,formState:$,setValue:G,reset:q,getValues:Y}=v,{isValid:m,errors:h,isDirty:d}=$;r.useEffect(()=>{const{data:u,isLoading:l,isSuccess:f,isError:x,error:V,isFetching:j}=F;i(H(l)),i(H(j));const ee=ne=>Ee(ne).format("MM/DD/YYYY");if(f&&u){const{totalCount:ne,totalPages:le,currentPage:te,data:K,pageSize:ge}=u;R(re=>({...re,totalCount:ne,totalPages:le,currentPage:te,pageSize:ge})),K==null||K.map((re,Le)=>{const{id:ye,startDate:be,endDate:Te,slots:Pe,shiftName:ve,businessPhaseName:$e,holidayBook:Be,businessPhaseId:Fe,shiftId:w,dailyDate:X,hasSlotOverride:ue,slotOverrideId:he}=re;p(fe=>{const ie=fe;return ie.push({id:Le,actions:!0,businessPhaseId:Fe,businessPhaseName:$e,dailyDate:ee(X),startDate:ee(be),endDate:ee(Te),slots:Pe,shiftId:w,shiftName:ve,holidayBook:Be,hasSlotOverride:ue,slotOverrideId:he}),ie})}),k(re=>n.filter?re:ne)}return x&&V&&i(_(L(`${o.t("ERROR_LOADING_DATA")} ${c.t("DAILY_SLOTS")}`,"error"))),()=>p([])},[F]),r.useEffect(()=>{a(T>se)},[T]);const D=(u,l)=>{e(f=>({...f,page:l+1}))},O=u=>{var x;const{id:l}=u.target,f=S.filter(V=>V.id==l);console.log(l,f[0]),i(Q({children:s(ke,{add:!0,slotOverrideId:(x=f[0].slotOverrideId)==null?void 0:x.toString(),data:f[0],fromDailySlots:!0,dailyDate:Ee(f[0].dailyDate).toDate()})}))},C=u=>{const{id:l}=u.target,f=S.filter(x=>x.id==l);i(Q({children:s(ke,{add:!1,slotOverrideId:l,data:f[0]})}))},b=u=>{const{startDate:l,endDate:f,businessPhaseId:x,shiftId:V}=u;B(!1),e(j=>({...j,businessPhaseId:(x==null?void 0:x.value)??0,shiftId:(V==null?void 0:V.value)??0,startDate:l,endDate:f})),localStorage.setObject("dailySlots",u)};return r.useEffect(()=>{const u=localStorage.getObject("dailySlots");u&&b(u)},[]),U(Re,{hasAddButton:!1,hasFilterButton:!0,handleFilterClick:()=>i(Q({children:s(Ks,{submitFilter:b})})),children:[s(xe,{hasAddButton:!1,handleFilterClick:N(u=>b(u)),children:s(St,{control:M,errors:h,setValue:G})}),s(Oe,{hasTabs:!0,showId:!1,tableLabel:c.t("DAILY_SLOTS"),tableHeadings:Gs(),tableRows:S,t:c.t,hasActions:!0,tableInfo:I,tableActions:Js(O),dynamicTableActions:Qs(C),dynamicActionTrigger:Xs,dynamicActionId:Ws,handlePageChange:D,hasFilterButton:!0})]})},ea=()=>[{key:"businessPhaseName",title:"PHASE",canBeSorted:!0,customSortVar:"phase"},{key:"shiftName",title:"SHIFT",canBeSorted:!0,customSortVar:"shift"},{key:"startDate",title:"START",isDate:!0,isConstantTranslation:!0,canBeSorted:!0},{key:"endDate",title:"END",isDate:!0,isConstantTranslation:!0,canBeSorted:!0},{key:"slots",title:"SLOTS",canBeSorted:!0}],ht=n=>{const{control:e,errors:t,setValue:a}=n,o=W(),c=y(Z),i=y(J),[S,p]=r.useState({businessId:1,pageSize:se,sortBy:"name",sortOrder:z.ASCENDING,page:1}),I=Ye(S),[R,T]=r.useState([]),[k,P]=r.useState(0),[B,F]=r.useState(),[A,g]=r.useState({businessId:1,pageSize:se,sortBy:"name",sortOrder:z.ASCENDING,page:1}),[v,N]=r.useState(!0),M=We(A,{refetchOnMountOrArgChange:!0,skip:v}),[$,G]=r.useState([]),[q,Y]=r.useState(0),[m,h]=r.useState(),[d,D]=r.useState();r.useEffect(()=>{const{isSuccess:l,data:f,isLoading:x,isFetching:V,isError:j,error:ee}=I;if(o(H(x)),o(H(V)),l&&f){const{data:ne,totalCount:le}=f;ne.map(te=>{R.filter(K=>K.value==te.id).length===0&&T(K=>[...K,{label:te.name,value:te.id}])}),P(te=>S.filter?te:le)}j&&ee&&o(_(L(`${c.t("ERROR_LOADING_DATA")} ${i.t("BUSINESS_PHASES")}`,"error")))},[I]);const O=()=>{R.length<k&&p(l=>({...l,page:l.page+1,filter:void 0}))},C=l=>{l&&setTimeout(()=>p(f=>({...f,filter:l})),500)};r.useEffect(()=>{B?(N(!1),g(l=>({...l,businessPhaseId:B.value}))):B===null&&(N(!0),G([]),h(null),a("shiftId",void 0)),B&&m&&Object.keys(B).length&&Object.keys(m).length&&(h(null),a("shiftId",void 0))},[B]),r.useEffect(()=>{const{isSuccess:l,data:f,isLoading:x,isFetching:V,isError:j,error:ee}=M;if(o(H(x)),o(H(V)),l&&f){const{data:ne,totalCount:le}=f,te=ne.map(K=>({label:K.name,value:K.id}));G([...te]),Y(K=>A.filter?K:le)}j&&ee&&o(_(L(`${c.t("ERROR_LOADING_DATA")} ${i.t("SHIFT")}`,"error")))},[M]);const b=()=>{$.length<q&&g(l=>({...l,page:l.page+1,filter:void 0}))},u=l=>{l&&setTimeout(()=>g(f=>({...f,filter:l})),500)};return r.useEffect(()=>{if($.length>0){const l=$.filter(f=>f.value===d)[0];l&&(a("shiftId",l),h(l),D(null))}else d===null&&h(null)},[$]),r.useEffect(()=>{const l=localStorage.getObject("slotOverrides");if(l){const{businessPhaseId:f,startDate:x,endDate:V,shiftId:j}=l;j&&(D(l.shiftId.value),h({label:j.label,value:j.value})),f&&(a("businessPhaseId",{label:f.label,value:f.value}),F({label:f.label,value:f.value})),a("startDate",new Date(x)),a("endDate",new Date(V))}},[]),U(Ge,{children:[s(Ne,{control:e,name:"businessPhaseId",label:i.t("PHASE"),errors:t,selectList:R,type:"string",filter:"true",InputLabelProps:{shrink:!0},onScrollFunc:O,onInputChange:C,onSelectState:F}),s(Ne,{control:e,name:"shiftId",label:i.t("SHIFT"),errors:t,selectList:$,type:"string",filter:"true",InputLabelProps:{shrink:!0},onScrollFunc:b,onInputChange:u,onSelectState:h,selectedState:m}),s(me,{control:e,name:"startDate",label:c.t("START"),errors:t,slotProps:{textField:{InputLabelProps:{shrink:!0}}},filter:"true"}),s(me,{control:e,name:"endDate",label:c.t("END"),errors:t,slotProps:{textField:{InputLabelProps:{shrink:!0}}},filter:"true"})]})},ta=n=>{const e=Ee(),t=e.startOf("month").toDate(),a=e.endOf("month").toDate(),o=W(),{submitFilter:c}=n,i=y(Z),S=y(J),p={businessPhaseId:null,shiftId:null,startDate:t,endDate:a},I=E.object({businessPhaseId:E.any().optional(),shiftId:E.any().optional(),startDate:E.date(),endDate:E.date()}).refine(M=>M.startDate<=M.endDate,{message:"End date must be after start date",path:["endDate"]}),R=de({mode:"onChange",defaultValues:p,resolver:Se(I)}),{handleSubmit:T,control:k,formState:P,setValue:B,reset:F,getValues:A}=R,{isValid:g,errors:v,isDirty:N}=P;return s(De,{title:i.t("FILTER")+" "+S.t("SLOT_OVERRIDES"),isDirty:N,isValid:g,isForm:!0,actions:[{title:i.t("FILTER"),onClick:()=>{const M=A();c(M),o(oe())}}],children:s(ht,{control:k,errors:v,setValue:B})})},sa=(n,e)=>[{label:"EDIT",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:edit"}),iconColor:"success",onClick:n},{label:"DELETE",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:delete"}),iconColor:"error",onClick:e}],aa=n=>{const e=y(Z),t=y(J),{slotOverrideId:a}=n,o=W(),[c,i]=zs();return r.useEffect(()=>{const{isSuccess:S,isError:p,error:I,isLoading:R}=i;o(H(R)),S&&(setTimeout(()=>{o(_(L(`${t.t("SLOT_OVERRIDE")}  ${e.t("DELETE_SUCCESSFUL")}`,"success")))},250),o(oe())),I&&p&&o(_(L(`${e.t("DELETE_ERROR")} $${t.t("SLOT_OVERRIDE")}`,"error")))},[i]),s(De,{title:`${e.t("DELETE")} ${t.t("SLOT_OVERRIDE")}`,actions:[{title:e.t("DELETE"),onClick:()=>{c(a)}}],children:U("div",{className:"flex flex-col px-12",children:[U("p",{className:"mb-10",children:[e.t("DELETE_MSG_1")," ",t.t("SLOT_OVERRIDE"),"?"]}),U("p",{className:"mb-32",children:[e.t("DELETE_PREFIX")," ",t.t("SLOT_OVERRIDE")," ",e.t("DELETE_MSG_2")]})]})})},na=()=>{const n=Ee(),e=n.startOf("month").toDate(),t=n.endOf("month").toDate(),[a,o]=r.useState({businessId:1,page:1,pageSize:se,sortBy:"phase",sortOrder:z.ASCENDING,startDate:e,endDate:t}),[c,i]=r.useState(!1),S=y(Z),p=y(J),I=W(),[R,T]=r.useState([]),[k,P]=r.useState({currentPage:1,pageSize:se,totalCount:0,totalPages:0}),[B,F]=r.useState(0),A=Vs(a,{refetchOnMountOrArgChange:!0}),g={businessPhaseId:null,shiftId:null,startDate:e,endDate:t},v=E.object({businessPhaseId:E.any().optional(),shiftId:E.any().optional(),startDate:E.date(),endDate:E.date()}).refine(l=>l.startDate<=l.endDate,{message:"End date must be after start date",path:["endDate"]}),N=de({mode:"onChange",defaultValues:g,resolver:Se(v)}),{handleSubmit:M,control:$,formState:G,setValue:q,reset:Y}=N,{isValid:m,errors:h,isDirty:d}=G;r.useEffect(()=>{const{data:l,isLoading:f,isSuccess:x,isError:V,error:j,isFetching:ee}=A;if(I(H(f)),I(H(ee)),x&&l){const{totalCount:ne,totalPages:le,currentPage:te,data:K,pageSize:ge}=l;P(re=>({...re,totalCount:ne,totalPages:le,currentPage:te,pageSize:ge})),K==null||K.map(re=>{const{id:Le,startDate:ye,endDate:be,slots:Te,shiftId:Pe,businessPhaseId:ve,businessPhaseName:$e,shiftName:Be}=re;T(Fe=>{const w=Fe;return w.push({id:Le,actions:!0,startDate:ye,endDate:be,slots:Te,businessPhaseId:ve,businessPhaseName:$e,shiftId:Pe,shiftName:Be}),w})}),F(re=>a.filter?re:ne)}return V&&j&&I(_(L(`${S.t("ERROR_LOADING_DATA")} ${p.t("SLOT_OVERRIDES")}`,"error"))),()=>T([])},[A]),r.useEffect(()=>{i(B>se)},[B]);const D=(l,f)=>{o(x=>({...x,page:f+1}))},O=(l,f)=>{o(x=>{let V;return x.sortBy===f?x.sortOrder===z.ASCENDING?V=z.DESCENDING:V=z.ASCENDING:V=z.ASCENDING,{...x,sortBy:f,sortOrder:V}})},C=l=>{const{startDate:f,endDate:x,businessPhaseId:V,shiftId:j}=l;o(ee=>({...ee,businessPhaseId:(V==null?void 0:V.value)??0,shiftId:(j==null?void 0:j.value)??0,startDate:f,endDate:x})),localStorage.setObject("slotOverrides",l)};r.useEffect(()=>{const l=localStorage.getObject("slotOverrides");l&&C(l)},[]);const b=l=>{const{id:f}=l.target;I(Q({children:s(ke,{add:!1,slotOverrideId:f,fromDailySlots:!1})}))},u=l=>{const{id:f}=l.target;I(Q({children:s(aa,{slotOverrideId:f})}))};return U(Re,{hasAddButton:!0,hasFilterButton:!0,handleClick:()=>I(Q({children:s(ke,{add:!0,fromDailySlots:!1})})),handleFilterClick:()=>I(Q({children:s(ta,{submitFilter:C})})),children:[s(xe,{hasAddButton:!0,handleFilterClick:M(l=>C(l)),handleAddClick:()=>I(Q({children:s(ke,{add:!0,fromDailySlots:!1})})),children:s(ht,{control:$,errors:h,setValue:q})}),s(Oe,{showId:!1,tableLabel:p.t("SLOT_OVERRIDES"),tableHeadings:ea(),tableRows:R,t:p.t,hasActions:!0,tableInfo:k,handlePageChange:D,handleSortChange:O,hasFilterButton:c,tableActions:sa(b,u)})]})},ra=()=>[{key:"",label:"DAILY_SLOTS"},{key:"slot-overrides",label:"SLOT_OVERRIDES"}],oa=n=>{const{slotTab:e,setSlotTab:t}=n,{t:a}=y(J);return U(je,{sx:{width:"100%"},children:[s(ut,{tabValue:e,tabLabel:"slot",tabs:ra(),handleTabChange:o=>t(o),t:a}),s(pe,{value:e,index:0,aria:"DailySlots",children:s(Zs,{})}),s(pe,{value:e,index:1,aria:"SlotOverrides",children:s(na,{})})]})};Storage.prototype.setObject=function(n,e){this.setItem(n,JSON.stringify(e))};Storage.prototype.getObject=function(n){var e=this.getItem(n);return e&&JSON.parse(e)};const la=n=>{const[e,t]=r.useState(0),[a,o]=r.useState(!1);return r.useEffect(()=>{const c=["dailySlots","slotOverrides"],i=()=>{c.forEach(S=>{localStorage.removeItem(S)}),o(!0)};return i(),()=>i()},[]),s(Ge,{children:a&&s(oa,{slotTab:e,setSlotTab:t})})},ia=()=>[{key:"startDate",title:"START_DATE",isDate:!0,isConstantTranslation:!0,canBeSorted:!0},{key:"endDate",title:"END_DATE",isDate:!0,isConstantTranslation:!0,canBeSorted:!0},{key:"maxDaysAllowed",title:"MAX_DAYS_ALLOWED",canBeSorted:!0,customSortVar:"maxAllowedDays"},{key:"singleDaysAllowed",title:"SINGLE_DAYS_ALLOWED",canBeSorted:!0,customSortVar:"singleDays"}],ca=["highDemand/fetchAll","highDemand/fetchOne"],ua=qe.enhanceEndpoints({addTagTypes:ca}).injectEndpoints({endpoints:n=>({getAllHighDemands:n.query({query:({businessId:e,page:t,pageSize:a,sortBy:o,sortOrder:c,filter:i})=>{let S="?";return t&&(S+=`page=${t}&`),a&&(S+=`pageSize=${a}&`),o&&(S+=`sortBy=${o}&`),c&&(S+=`sortOrder=${c}&`),i&&(S+=`filter=${i}`),{url:`/business/gethighdemandperiods/${e}${S}`}},providesTags:["highDemand/fetchAll"]}),getOneHighDemand:n.query({query:e=>({url:`/business/gethighdemandperiodsbyid/${e}`}),providesTags:["highDemand/fetchOne"]}),postHighDemand:n.mutation({query:e=>({url:"/business/addhighdemandperiods",method:"POST",data:e}),invalidatesTags:["highDemand/fetchAll"]}),putHighDemand:n.mutation({query:e=>({url:"/business/updatehighdemandperiods",method:"PUT",data:e}),invalidatesTags:["highDemand/fetchAll","highDemand/fetchOne"]}),deleteHighDemand:n.mutation({query:e=>({url:`/business/deletehighdemandperiods/${e}`,method:"DELETE"}),invalidatesTags:["highDemand/fetchAll"]})})}),{useGetAllHighDemandsQuery:da,useGetOneHighDemandQuery:Sa,usePostHighDemandMutation:ha,usePutHighDemandMutation:fa,useDeleteHighDemandMutation:Ea}=ua,ma=n=>Array(n).fill(0,1).map((e,t)=>t===1?{label:t+" day",value:t}:{label:t+" days",value:t}),it=n=>{const e=y(J),t=y(Z),a=W(),{add:o,highDemandId:c}=n,[i,S]=r.useState(!0);r.useState(!1);const p=Sa(c,{refetchOnMountOrArgChange:!0,skip:i}),[I,R]=ha(),[T,k]=fa();r.useEffect(()=>(c&&S(!1),()=>S(!0)),[c]);const P={id:void 0,businessId:1,startDate:new Date,endDate:new Date,maxDaysAllowed:0,singleDaysAllowed:!1},B=E.object({id:E.number().optional(),businessId:E.number().optional(),startDate:E.date(),endDate:E.date(),maxDaysAllowed:E.number(),singleDaysAllowed:E.boolean()}),F=de({mode:"onChange",defaultValues:P,resolver:Se(B)}),{handleSubmit:A,control:g,formState:v,setValue:N,reset:M}=F,{isValid:$,errors:G,isDirty:q}=v;r.useEffect(()=>{const{data:m,isSuccess:h,isLoading:d,isError:D,error:O}=p;return a(H(d)),h&&m&&Object.keys(m).forEach(C=>{typeof m[C]=="string"&&Ee(m[C]).isValid()?N(C,new Date(m[C])):N(C,m[C])}),D&&O&&a(_(L(`${t.t("ERROR_LOADING_DATA")} ${e.t("HIGH_DEMAND")}`,"error"))),()=>Object.keys(P).forEach(C=>N(C,P[C]))},[p]);const Y=m=>{o?I(m):T(m),M(m)};return r.useEffect(()=>{const{isError:m,isLoading:h,isSuccess:d,data:D,error:O}=R;a(H(h)),d&&D&&(setTimeout(()=>{a(_(L(`${e.t("HIGH_DEMAND")} ${t.t("ADD_SUCCESSFUL")}`,"success")))},250),a(oe())),m&&O&&a(_(L(`${t.t("ADD_ERROR")} ${e.t("HIGH_DEMAND")}`,"error")))},[R]),r.useEffect(()=>{const{isError:m,isLoading:h,isSuccess:d,data:D,error:O}=k;a(H(h)),d&&D&&(setTimeout(()=>{a(_(L(`${e.t("HIGH_DEMAND")} ${t.t("SAVE_SUCCESSFUL")}`,"success")))},250),a(oe())),m&&O&&a(_(L(`${t.t("SAVE_ERROR")} ${e.t("HIGH_DEMAND")}`,"error")))},[k]),U(_e,{isDirty:q,isValid:$,actions:[{title:o?t.t("ADD"):t.t("SAVE"),onClick:A(m=>Y(m))}],handleSubmit:A(m=>Y(m)),title:o?`${t.t("ADD")} ${e.t("HIGH_DEMAND")} ${t.t("PERIOD")}`:`${t.t("EDIT")} ${e.t("HIGH_DEMAND")} ${t.t("PERIOD")}`,children:[s(me,{control:g,name:"startDate",label:t.t("PERIOD_START")+" *",errors:G,slotProps:{textField:{InputLabelProps:{shrink:!0}}},dialog:"true"}),s(me,{control:g,name:"endDate",label:t.t("PERIOD_END")+" *",errors:G,slotProps:{textField:{InputLabelProps:{shrink:!0}}},dialog:"true"}),s(Ae,{control:g,name:"maxDaysAllowed",label:e.t("MAX_DAYS_ALLOWED"),errors:G,selectList:ma(24),required:!0,type:"number",InputLabelProps:{shrink:!0},dialog:"true",placeholder:e.t("MAX_DAYS_ALLOWED")}),s(Xe,{control:g,name:"singleDaysAllowed",label:e.t("SINGLE_DAYS_ALLOWED"),errors:G})]})},ga=n=>{const e=y(Z),t=y(J),{highDemandId:a}=n,o=W(),[c,i]=Ea();return r.useEffect(()=>{const{isSuccess:S,isError:p,error:I,isLoading:R}=i;o(H(R)),S&&(setTimeout(()=>{o(_(L(`${t.t("HIGH_DEMAND")} ${e.t("PERIOD")} ${e.t("DELETE_SUCCESSFUL")}`,"success")))},250),o(oe())),I&&p&&o(_(L(`${e.t("DELETE_ERROR")} ${t.t("HIGH_DEMAND")} ${e.t("PERIOD")}`,"error")))},[i]),s(De,{title:`${e.t("DELETE")} ${t.t("HIGH_DEMAND")}`,actions:[{title:e.t("DELETE"),onClick:()=>{c(a)}}],children:U("div",{className:"flex flex-col px-12",children:[U("p",{className:"mb-10",children:[e.t("DELETE_MSG_1")," ",t.t("HIGH_DEMAND")," ",e.t("PERIOD"),"?"]}),U("p",{className:"mb-32",children:[e.t("DELETE_PREFIX")," ",t.t("HIGH_DEMAND")," ",e.t("PERIOD")," ",e.t("DELETE_MSG_2")]})]})})},Da=(n,e)=>[{label:"EDIT",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:edit"}),iconColor:"success",onClick:n},{label:"DELETE",icon:s(ce,{className:"pointer-events-none",size:24,children:"material-outline:delete"}),iconColor:"error",onClick:e}],ba=()=>{const[n,e]=r.useState({businessId:1,page:1,pageSize:se,sortBy:"startDate",sortOrder:z.ASCENDING}),[t,a]=r.useState({currentPage:1,pageSize:se,totalCount:0,totalPages:0}),o=y(Z),c=y(J),i=W(),[S,p]=r.useState([]),[I,R]=r.useState(0),T=da(n,{refetchOnMountOrArgChange:!0});r.useEffect(()=>{const{data:A,isLoading:g,isSuccess:v,isError:N,error:M,isFetching:$}=T;if(i(H($)),i(H(g)),v&&A){const{totalCount:G,totalPages:q,currentPage:Y,data:m,pageSize:h}=A;a(d=>({...d,totalCount:G,totalPages:q,currentPage:Y,pageSize:h})),m.map(d=>{const{id:D,startDate:O,endDate:C,maxDaysAllowed:b,singleDaysAllowed:u}=d;p(l=>{const f=l;return f.push({id:D,actions:!0,startDate:O,endDate:C,maxDaysAllowed:b,singleDaysAllowed:u}),f})}),R(d=>n.filter?d:G)}return N&&M&&i(_(L(`${o.t("ERROR_LOADING_DATA")} ${c.t("HIGH_DEMAND")}`,"error"))),()=>p([])},[T]);const k=A=>{const{id:g}=A.target;i(Q({children:s(it,{add:!1,highDemandId:g})}))},P=A=>{const{id:g}=A.target;i(Q({children:s(ga,{highDemandId:g})}))},B=(A,g)=>{e(v=>({...v,page:g+1}))},F=(A,g)=>{e(v=>{let N;return v.sortBy===g?v.sortOrder===z.ASCENDING?N=z.DESCENDING:N=z.ASCENDING:N=z.ASCENDING,{...v,sortBy:g,sortOrder:N}})};return s(Re,{title:c.t("HIGH_DEMAND"),hasAddButton:!0,handleClick:()=>i(Q({children:s(it,{add:!0})})),children:s(Oe,{sortBy:n==null?void 0:n.sortBy,sortOrder:n==null?void 0:n.sortOrder,showId:!1,tableLabel:c.t("HIGH_DEMAND"),tableHeadings:ia(),tableRows:S,t:c.t,hasActions:!0,tableActions:Da(k,P),tableInfo:t,handlePageChange:B,handleSortChange:F})})},pa=()=>[{key:"business-info",label:"BUSINESS_INFO"},{key:"business-phases",label:"BUSINESS_PHASES"},{key:"rejection-reasons",label:"REJECTION_REASONS"},{key:"user-categories",label:"USER_CATEGORIES"},{key:"slot-release-schedule",label:"SLOT_RELEASE_SCHEDULE"},{key:"slot",label:"SLOT"},{key:"high-demand",label:"HIGH_DEMAND"}],Ia=n=>{const{selectedTab:e}=yt(a=>a.settings),{t}=y(J);return U(je,{sx:{width:"100%"},children:[s(ut,{tabValue:e,tabLabel:"settings",tabs:pa(),t}),s(pe,{value:e,index:0,aria:"BusinessInfo",children:s(rs,{})}),s(pe,{value:e,index:1,aria:"BusinessPhases",children:s(us,{})}),s(pe,{value:e,index:2,aria:"RejectionReasons",children:s(Rs,{})}),s(pe,{value:e,index:3,aria:"UserCategories",children:s(Ns,{})}),s(pe,{value:e,index:4,aria:"SlotReleaseSchedule",children:s(ks,{})}),s(pe,{value:e,index:5,aria:"Slot",children:s(la,{})}),s(pe,{value:e,index:6,aria:"HighDemand",children:s(ba,{})})]})},Oa=Pt(Ut)(({theme:n})=>({...$t(n)})),Ha=n=>{const{tab:e}=n,{t}=y(J),a=W();return r.useEffect(()=>{const o=c=>{a(vt({tab:c}))};return e>=0&&o(e),()=>{o(0)}},[e]),s(Oa,{header:s(Bt,{title:t("TITLE")}),scroll:"page",content:s(Ia,{})})};export{Ha as default};
//# sourceMappingURL=Settings-BG2aBdYy.js.map

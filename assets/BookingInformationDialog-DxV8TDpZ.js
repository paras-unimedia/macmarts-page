import{w as B,a7 as S,x as $,r as g,z as T,A as N,N as O,j as o,C as G,d,ak as q,al as E,E as L,T as l,o as w,Q as U}from"./index-Db1G4GFK.js";import{d as C,n as P,L as b,j,b as R}from"./CustomFormDialog-CJNVvg9u.js";import{u as y,s as A,h as D}from"./SnackbarDefaults-bH2yLHx5.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="a296ec07-74a2-4ba9-85be-547bf28d934e",t._sentryDebugIdIdentifier="sentry-dbid-a296ec07-74a2-4ba9-85be-547bf28d934e")}catch{}})();var h=(t=>(t.CANCELLED="Cancelled",t.REQUESTED="Requested",t.CONFIRMED="Confirmed",t.WAITING_LIST="WaitingList",t.REJECTED="Rejected",t.AUTOMATICALLY_PROMOTED="AutomaticallyPromoted",t))(h||{});const te=["Cancelled","Requested","Confirmed","WaitingList","Rejected","AutomaticallyPromoted"],Y=[C,P,b,j,C,b],K=["booking/fetchAll","booking/fetchOne"],Q=B.enhanceEndpoints({addTagTypes:K}).injectEndpoints({endpoints:t=>({getAllBookings:t.query({query:({page:s,pageSize:n,sortBy:a,sortOrder:r,filter:u,year:i,month:f,bookingStatus:c})=>{let e="?";return s&&(e+=`page=${s}&`),n&&(e+=`pageSize=${n}&`),a&&(e+=`sortBy=${a}&`),r&&(e+=`sortOrder=${r}&`),u&&(e+=`filter=${u}&`),i&&(e+=`year=${i}&`),f&&(e+=`month=${f}&`),c>=0&&(e+=`bookingStatus=${c}`),{url:`/bookings/getbookings/${e}`}},providesTags:["booking/fetchAll"]}),getOneBooking:t.query({query:s=>({url:`/bookings/getbookingsbyid/${s}`}),providesTags:["booking/fetchOne"]}),postBookings:t.mutation({query:s=>({url:"/bookings/addbookings",method:"POST",data:s}),invalidatesTags:["booking/fetchAll"]}),putBookings:t.mutation({query:s=>({url:"/bookings/updatebookings",method:"PUT",data:s}),invalidatesTags:["booking/fetchAll","booking/fetchOne"]}),deleteBookings:t.mutation({query:s=>({url:`/bookings/deletebookings/${s}`,method:"DELETE"}),invalidatesTags:["booking/fetchAll"]}),cancelBooking:t.mutation({query:s=>({url:"/bookings/cancel",method:"PUT",data:s}),invalidatesTags:["booking/fetchAll"]})})}),{useGetAllBookingsQuery:ae,useGetOneBookingQuery:F,usePostBookingsMutation:ne,usePutBookingsMutation:oe,useDeleteBookingsMutation:re,useCancelBookingMutation:W}=Q,J=["userShifts/fetchAll","userShifts/users/fetchAll"],V=B.enhanceEndpoints({addTagTypes:J}).injectEndpoints({endpoints:t=>({getUserShiftsByMonth:t.query({query:({month:s,year:n,businessId:a})=>{let r="?";return s&&(r+=`month=${s}&`),n&&(r+=`year=${n}&`),a&&(r+=`businessId=${a}`),{url:`/shifts/getusershiftpattern${r}`}},providesTags:["userShifts/fetchAll"]}),getUsersPerShift:t.query({query:({day:s,businessId:n})=>{let a="?";return s&&(a+=`day=${s}&`),n&&(a+=`businessId=${n}`),{url:`/shifts/getuserspershift${a}`}},providesTags:["userShifts/users/fetchAll"]}),getUserShiftSlots:t.query({query:({startDate:s,businessId:n})=>{let a="?";return s&&(a+=`startDate=${s}&`),n&&(a+=`businessId=${n}`),{url:`/shifts/getusershiftslots${a}`}}})})}),{useGetUserShiftsByMonthQuery:ie,useGetUsersPerShiftQuery:le,useGetUserShiftSlotsQuery:ce}=V,z=t=>{const{bookingId:s}=t,n=y(S),a=$(),[r,u]=W();return g.useEffect(()=>{const{isSuccess:i,isError:f,error:c,isLoading:e}=u;a(T(e)),i&&(setTimeout(()=>{a(N(A(`${n.t("BOOKING_CANCEL_SUCCESSFUL")}`,"success")))},250),a(O())),c&&f&&a(N(A(`${n.t("BOOKING_CANCEL_ERROR")}`,"error")))},[u]),o(R,{title:n.t("CANCEL_BOOKING"),actions:[{title:n.t("CANCEL_BOOKING"),onClick:()=>{r({bookingId:parseInt(s)}),a(O())}}],children:o("div",{className:"flex flex-col px-12",children:o("p",{className:"mb-10",children:n.t("BOOKING_CANCEL_MESSAGE")})})})},H=t=>{const{children:s,tab:n,index:a,...r}=t;return o("div",{className:"my-12",role:"tabpanel",hidden:n!==a,id:`business-tabpanel-${a}`,"aria-labelledby":`business-tab-${a}`,...r,children:n===a&&o(L,{children:s})})},de=t=>{const{bookingId:s,userShiftFlag:n}=t,[a,r]=g.useState(0),u=y(G),i=y(S),f=F(s,{refetchOnMountOrArgChange:!0}),c=$(),[e,_]=g.useState();g.useEffect(()=>{const{data:m,isSuccess:p,error:x,isError:M,isLoading:k,isFetching:v}=f;c(T(k)),c(T(v)),m&&p&&_(m),M&&x&&c(N(A(`${u.t("ERROR_LOADING_DATA")} ${i.t("BOOKING")}`,"error")))},[f]);const I=d(w,{children:[o(L,{sx:{borderBottom:1,borderColor:"divider",marginBottom:"1rem"},children:d(q,{value:a,onChange:(m,p)=>{r(p)},variant:"scrollable",scrollButtons:"auto",children:[o(E,{label:i.t("BOOKING_INFORMATION")}),(e==null?void 0:e.status)===h.CONFIRMED||(e==null?void 0:e.status)===h.REJECTED?o(E,{label:i.t("APPROVER")}):"",(e==null?void 0:e.status)===h.WAITING_LIST&&o(E,{label:i.t("WAITING_LIST")})]})}),o(H,{tab:a,index:0,children:d("div",{className:"flex flex-col gap-12",children:[d("div",{className:"flex flex-row items-center gap-12",children:[o(l,{className:"font-bold",children:"Status:"}),o(l,{className:"px-8 py-4 rounded-full",style:{backgroundColor:Y[e==null?void 0:e.statusId],color:"white"},children:e==null?void 0:e.status})]}),e!=null&&e.rejectedReasonId?d("div",{className:"flex flex-row items-center gap-12",children:[o(l,{className:"font-bold",children:"Rejection Reason:"}),o(l,{})]}):"",d("div",{className:"flex flex-row items-center gap-12",children:[d(l,{className:"font-bold",children:[(e==null?void 0:e.startDate)===(e==null?void 0:e.endDate)?"Date":"Start Date",":"]}),o(l,{children:D(e==null?void 0:e.startDate).format("Do MMMM YYYY")})]}),(e==null?void 0:e.startDate)!==(e==null?void 0:e.endDate)?d("div",{className:"flex flex-row items-center gap-12",children:[o(l,{className:"font-bold",children:"End Date:"}),o(l,{children:D(e==null?void 0:e.endDate).format("Do MMMM YYYY")})]}):"",d("div",{className:"flex flex-row items-center gap-12",children:[o(l,{className:"font-bold",children:"Notes:"}),o(l,{children:e==null?void 0:e.notes})]})]})})]});return n?I:o(R,{title:`${i.t("HOLIDAY_REQUEST")}`,actions:(e==null?void 0:e.status)===h.REQUESTED?[{title:i.t("CANCEL_BOOKING"),onClick:()=>{c(U({children:o(z,{bookingId:s})}))},forceEnable:!0}]:[],children:I})};export{te as B,ie as a,ce as b,Y as c,ae as d,de as e,le as f,h as g,z as h,ne as u};
//# sourceMappingURL=BookingInformationDialog-DxV8TDpZ.js.map

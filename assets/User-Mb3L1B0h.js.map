{"version":3,"file":"User-Mb3L1B0h.js","sources":["../../src/app/main/pages/user/constants/userHeadings.ts","../../src/app/main/pages/user/user-filter-form/UserFilterForm.tsx","../../src/app/main/pages/user/user-custom-filter-actions/UserCustomFilterActions.tsx","../../src/app/main/pages/user/user-filter-dialog-form/UserFilterDialogForm.tsx","../../src/app/main/pages/user/user-table-actions/UserTableActions.tsx","../../src/app/main/pages/user/constants/userImportDialogHeadings.ts","../../src/app/shared-components/custom-file-upload-field/CustomFileUploadField.tsx","../../src/app/main/pages/user/UserApi.ts","../../src/app/main/pages/user/user-import-csv-dialog-form/UserImportCsvDialogForm.tsx","../../src/app/main/pages/user/constants/userDialogTabItems.ts","../../src/app/main/pages/user/user-dialog-form/user-dialog-tabs/info/Info.tsx","../../src/app/main/pages/user/user-dialog-form/user-dialog-tabs/organisation/Organisation.tsx","../../src/app/main/pages/user/user-dialog-form/user-dialog-tabs/audit/Audit.tsx","../../src/app/main/pages/user/user-dialog-form/UserDialogForm.tsx","../../src/app/main/pages/user/UserContent.tsx","../../src/app/main/pages/user/User.tsx"],"sourcesContent":["import { TableHeading } from \"app/shared-components/custom-table/CustomTable\";\n\nconst userHeadings: () => Array<TableHeading> = () => [\n\t{\n\t\tkey: \"id\",\n\t\ttitle: \"ID\",\n\t\tcanBeSorted: true\n\t},\n\t{\n\t\tkey: \"email\",\n\t\ttitle: \"EMAIL\",\n\t\tcanBeSorted: true\n\t},\n\t{\n\t\tkey: \"name\",\n\t\ttitle: \"NAME\",\n\t\tcanBeSorted: true\n\t},\n\t{\n\t\tkey: \"surname\",\n\t\ttitle: \"SURNAME\",\n\t\tcanBeSorted: true\n\t},\n\t{\n\t\tkey: \"phaseName\",\n\t\ttitle: \"PHASE\",\n\t\tcanBeSorted: true\n\t},\n\t{\n\t\tkey: \"shiftName\",\n\t\ttitle: \"SHIFT\",\n\t\tcanBeSorted: true\n\t},\n\t{\n\t\tkey: \"lastLogin\",\n\t\ttitle: \"LAST_LOGIN\",\n\t\tcanBeSorted: true\n\t},\n\t{\n\t\tkey: \"area\",\n\t\ttitle: \"AREA\",\n\t\tcanBeSorted: true\n\t},\n\t{\n\t\tkey: \"delegate\",\n\t\ttitle: \"DELEGATE\",\n\t\tcanBeSorted: true\n\t},\n\t{\n\t\tkey: \"escalationManager\",\n\t\ttitle: \"BU_MANAGER\",\n\t\tcanBeSorted: true\n\t}\n];\n\nexport default userHeadings;\n","import CustomAutoComplete from \"app/shared-components/custom-auto-complete/CustomAutoComplete\";\nimport CustomSelectField, { SelectList } from \"app/shared-components/custom-select-field/CustomSelectField\";\nimport CustomTextField from \"app/shared-components/custom-text-field/CustomTextField\";\nimport { CONSTANTS, SETTINGS_PAGE, SHIFTS_PAGE, USER_PAGE } from \"app/constants/TranslationNamespaces\";\nimport { Control, FieldErrors, UseFormSetValue } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { IUserFilter } from \"../UserModel\";\nimport { useEffect, useState } from \"react\";\nimport { ITableBusinessPhaseArg } from \"../../settings/tabs/business-phases/BusinessPhasesModel\";\nimport { SortOrder } from \"app/constants/DefaultInterfaces\";\nimport { DEFAULT_PAGE_SIZE } from \"app/constants/DefaultConfig\";\nimport { useGetAllBusinessPhasesQuery } from \"../../settings/tabs/business-phases/BusinessPhasesApi\";\nimport { ITableShiftsArg } from \"../../shifts/tabs/shifts/ShiftsModel\";\nimport { useGetAllShiftsQuery } from \"../../shifts/tabs/shifts/ShiftsApi\";\nimport { showLoading } from \"app/shared-components/custom-loading/CustomLoadingSlice\";\nimport { useDispatch } from \"react-redux\";\nimport { showMessage } from \"@fuse/core/FuseMessage/fuseMessageSlice\";\nimport { snackbarDefaults } from \"app/constants/SnackbarDefaults\";\n\ntype UserFilterFormProps = {\n\tcontrol: Control<IUserFilter, any>;\n\terrors: FieldErrors<IUserFilter>;\n\tsetValue: UseFormSetValue<IUserFilter>;\n\tfilter: boolean;\n\tphaseId?: SelectList;\n};\n\nconst UserFilterForm = (props: UserFilterFormProps) => {\n\tconst { control, errors, filter, setValue, phaseId } = props;\n\tconst dispatch = useDispatch();\n\n\tconst constantTranslation = useTranslation(CONSTANTS);\n\tconst shiftsTranslation = useTranslation(SHIFTS_PAGE);\n\tconst settingsTranslation = useTranslation(SETTINGS_PAGE);\n\tconst userTranslation = useTranslation(USER_PAGE);\n\tconst [selectedPhase, setSelectedPhase] = useState<SelectList>();\n\tconst [selectedShift, setSelectedShift] = useState<SelectList>();\n\n\tconst [phaseFetchArg, setPhaseFetchArg] = useState<ITableBusinessPhaseArg>({ businessId: 1, pageSize: DEFAULT_PAGE_SIZE, sortBy: \"name\", sortOrder: SortOrder.ASCENDING, page: 1 });\n\tconst getBusinessPhases = useGetAllBusinessPhasesQuery(phaseFetchArg);\n\tconst [phases, setPhases] = useState<Array<SelectList>>([]);\n\tconst [totalPhases, setTotalPhases] = useState(0);\n\n\tconst [shiftsFetchArg, setShiftsFetchArg] = useState<ITableShiftsArg>({ businessId: 1, pageSize: DEFAULT_PAGE_SIZE, sortBy: \"name\", sortOrder: SortOrder.ASCENDING, page: 1, businessPhaseId: 1 });\n\tconst [skipShiftsFetch, setSkipShiftsFetch] = useState(true);\n\tconst getShifts = useGetAllShiftsQuery(shiftsFetchArg, { refetchOnMountOrArgChange: true, skip: skipShiftsFetch });\n\tconst [shifts, setShifts] = useState<Array<SelectList>>([]);\n\tconst [totalShifts, setTotalShifts] = useState(0);\n\n\tuseEffect(() => {\n\t\tif (phaseId && phaseId.value != 0) {\n\t\t\tsetSelectedPhase(phaseId);\n\t\t}\n\t}, [phaseId]);\n\n\tuseEffect(() => {\n\t\tconst { isSuccess, data: rawData, isLoading, isFetching, isError, error } = getShifts;\n\n\t\tdispatch(showLoading(isLoading));\n\t\tdispatch(showLoading(isFetching));\n\n\t\tif (isSuccess && rawData) {\n\t\t\tconst { data, totalCount } = rawData;\n\t\t\tconst newShiftsData = data.map((item) => ({ label: item.name, value: item.id }));\n\t\t\tsetShifts([...newShiftsData]);\n\n\t\t\tsetTotalShifts((state) => {\n\t\t\t\tif (shiftsFetchArg.filter) {\n\t\t\t\t\treturn state;\n\t\t\t\t} else {\n\t\t\t\t\treturn totalCount;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${settingsTranslation.t(\"SHIFT\")}`, \"error\")));\n\t\t}\n\t}, [getShifts]);\n\n\tuseEffect(() => {\n\t\tconst { isSuccess, data: rawData, isLoading, isFetching, isError, error } = getBusinessPhases;\n\n\t\tdispatch(showLoading(isLoading));\n\t\tdispatch(showLoading(isFetching));\n\n\t\tif (isSuccess && rawData) {\n\t\t\tconst { data, totalCount } = rawData;\n\n\t\t\tdata.map((item) => {\n\t\t\t\tif (phases.filter((phase) => phase.value == item.id).length === 0) {\n\t\t\t\t\tsetPhases((state) => [...state, { label: item.name, value: item.id }]);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetTotalPhases((state) => {\n\t\t\t\tif (phaseFetchArg.filter) {\n\t\t\t\t\treturn state;\n\t\t\t\t} else {\n\t\t\t\t\treturn totalCount;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${settingsTranslation.t(\"BUSINESS_PHASES\")}`, \"error\")));\n\t\t}\n\t}, [getBusinessPhases]);\n\n\tconst onPhasesScroll = () => {\n\t\tif (phases.length < totalPhases) {\n\t\t\tsetPhaseFetchArg((state) => {\n\t\t\t\treturn { ...state, page: state.page + 1, filter: undefined };\n\t\t\t});\n\t\t}\n\t};\n\tconst onShiftsScroll = () => {\n\t\tif (shifts.length < totalShifts) {\n\t\t\tsetShiftsFetchArg((state) => {\n\t\t\t\treturn { ...state, page: state.page + 1, filter: undefined };\n\t\t\t});\n\t\t}\n\t};\n\n\tconst phaseInputChange = (value) => {\n\t\tif (value) {\n\t\t\tsetTimeout(() => setPhaseFetchArg((state) => ({ ...state, filter: value })), 500);\n\t\t}\n\t};\n\tconst shiftsInputChange = (value) => {\n\t\tif (value) {\n\t\t\tsetTimeout(() => setShiftsFetchArg((state) => ({ ...state, filter: value })), 500);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (selectedPhase) {\n\t\t\tsetSkipShiftsFetch(false);\n\t\t\tsetShiftsFetchArg((state) => ({ ...state, businessPhaseId: selectedPhase.value as number }));\n\t\t} else if (selectedPhase === null) {\n\t\t\tsetSkipShiftsFetch(true);\n\t\t\tsetShifts([]);\n\t\t\tsetSelectedShift(null);\n\t\t\tsetValue(\"shiftId\", undefined);\n\t\t}\n\n\t\t// this will clear the shift on phase change\n\t\tif (selectedPhase && selectedShift && Object.keys(selectedPhase).length && Object.keys(selectedShift).length) {\n\t\t\tsetSelectedShift(null);\n\t\t\tsetValue(\"shiftId\", undefined);\n\t\t}\n\t}, [selectedPhase]);\n\n\treturn (\n\t\t<>\n\t\t\t<CustomTextField\n\t\t\t\tcontrol={control}\n\t\t\t\tname=\"employeeId\"\n\t\t\t\tlabel={userTranslation.t(\"EMPLOYEE_ID\")}\n\t\t\t\terrors={errors}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true\n\t\t\t\t}}\n\t\t\t\tfilter={filter}\n\t\t\t\tplaceholder={userTranslation.t(\"EMPLOYEE_ID\")}\n\t\t\t/>\n\t\t\t<CustomTextField\n\t\t\t\tcontrol={control}\n\t\t\t\tname=\"email\"\n\t\t\t\tlabel={userTranslation.t(\"EMAIL\")}\n\t\t\t\terrors={errors}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true\n\t\t\t\t}}\n\t\t\t\tfilter={filter}\n\t\t\t\tplaceholder={userTranslation.t(\"EMAIL\")}\n\t\t\t/>\n\t\t\t<CustomTextField\n\t\t\t\tcontrol={control}\n\t\t\t\tname=\"name\"\n\t\t\t\tlabel={constantTranslation.t(\"NAME\")}\n\t\t\t\terrors={errors}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true\n\t\t\t\t}}\n\t\t\t\tfilter={filter}\n\t\t\t\tplaceholder={constantTranslation.t(\"NAME\")}\n\t\t\t/>\n\t\t\t<CustomAutoComplete\n\t\t\t\tcontrol={control}\n\t\t\t\tname=\"phaseId\"\n\t\t\t\tlabel={constantTranslation.t(\"PHASE\")}\n\t\t\t\terrors={errors}\n\t\t\t\tfilter={filter}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true\n\t\t\t\t}}\n\t\t\t\tselectList={phases}\n\t\t\t\tonScrollFunc={onPhasesScroll}\n\t\t\t\tonInputChange={phaseInputChange}\n\t\t\t\tonSelectState={setSelectedPhase}\n\t\t\t/>\n\t\t\t<CustomAutoComplete\n\t\t\t\tcontrol={control}\n\t\t\t\tname=\"shiftId\"\n\t\t\t\tlabel={settingsTranslation.t(\"SHIFT\")}\n\t\t\t\terrors={errors}\n\t\t\t\tfilter={filter}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true\n\t\t\t\t}}\n\t\t\t\tselectList={shifts}\n\t\t\t\tonScrollFunc={onShiftsScroll}\n\t\t\t\tonInputChange={shiftsInputChange}\n\t\t\t\tonSelectState={setSelectedShift}\n\t\t\t\tselectedState={selectedShift}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default UserFilterForm;\n","import FuseSvgIcon from \"@fuse/core/FuseSvgIcon\";\nimport { CustomFilterActionButton } from \"app/shared-components/custom-filter-container/CustomFilterContainer\";\n\ntype HandleEdit = (BaseSyntheticEvent) => void;\ntype HandleDelete = (BaseSyntheticEvent) => void;\n\nconst UserCustomFilterActions = (handleEdit: HandleEdit, handleDelete: HandleDelete): Array<CustomFilterActionButton> => [\n\t{\n\t\tlabel: \"IMPORT_CSV\",\n\t\ticon: (\n\t\t\t<FuseSvgIcon\n\t\t\t\tclassName=\"pointer-events-none\"\n\t\t\t\tsize={24}\n\t\t\t>\n\t\t\t\tmaterial-outline:file_download\n\t\t\t</FuseSvgIcon>\n\t\t),\n\t\thandleClick: handleEdit\n\t},\n\t{\n\t\tlabel: \"EXPORT_CSV\",\n\t\ticon: (\n\t\t\t<FuseSvgIcon\n\t\t\t\tclassName=\"pointer-events-none\"\n\t\t\t\tsize={24}\n\t\t\t>\n\t\t\t\tmaterial-outline:file_download\n\t\t\t</FuseSvgIcon>\n\t\t),\n\t\thandleClick: handleDelete\n\t}\n];\n\nexport default UserCustomFilterActions;\n","import CustomTextField from \"app/shared-components/custom-text-field/CustomTextField\";\nimport { BaseSyntheticEvent, useEffect, useState } from \"react\";\nimport { Control, FieldErrors, FieldValues, UseFormSetValue, useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { CONSTANTS, SETTINGS_PAGE, USER_PAGE } from \"app/constants/TranslationNamespaces\";\nimport { useDispatch } from \"react-redux\";\nimport { closeDialog } from \"@fuse/core/FuseDialog/fuseDialogSlice\";\nimport CustomDialog from \"app/shared-components/custom-dialog/CustomDialog\";\nimport UserFilterForm from \"../user-filter-form/UserFilterForm\";\nimport { SelectList } from \"app/shared-components/custom-select-field/CustomSelectField\";\nimport { ITableUserArg, IUserFilter } from \"../UserModel\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\n\ntype UserFilterDialogFormProps = {\n\tsubmitFilter: (data) => void;\n\tfetchArgs?: ITableUserArg;\n};\n\nconst UserFilterDialogForm = (props: UserFilterDialogFormProps) => {\n\tconst { submitFilter, fetchArgs } = props;\n\tconst dispatch = useDispatch();\n\tconst constantTranslations = useTranslation(CONSTANTS);\n\tconst settingsTranslation = useTranslation(SETTINGS_PAGE);\n\tconst userTranslation = useTranslation(USER_PAGE);\n\tconst [phaseId, setPhaseId] = useState<SelectList>();\n\n\tconst defaultFilterValues: IUserFilter = {\n\t\temployeeId: \"\",\n\t\temail: \"\",\n\t\tname: \"\",\n\t\tphaseId: null,\n\t\tshiftId: null\n\t};\n\n\tconst schema = z.object({\n\t\temployeeId: z.string().optional(),\n\t\temail: z.string().optional(),\n\t\tname: z.string().optional(),\n\t\tphaseId: z.any().optional(),\n\t\tshiftId: z.any().optional()\n\t});\n\n\tconst methods = useForm({\n\t\tmode: \"onChange\",\n\t\tdefaultValues: defaultFilterValues,\n\t\tresolver: zodResolver(schema)\n\t});\n\n\tconst { control, formState, handleSubmit, setValue, getValues } = methods;\n\tconst { errors, isDirty, isValid } = formState;\n\n\tuseEffect(() => {\n\t\tif (fetchArgs) {\n\t\t\tconst { name, email, employeeId, phaseId, phaseName, shiftId, shiftName } = fetchArgs;\n\n\t\t\tif (employeeId) {\n\t\t\t\tsetValue(\"employeeId\", employeeId);\n\t\t\t}\n\t\t\tif (email) {\n\t\t\t\tsetValue(\"email\", email);\n\t\t\t}\n\t\t\tif (name) {\n\t\t\t\tsetValue(\"name\", name);\n\t\t\t}\n\t\t\tif (phaseId) {\n\t\t\t\tsetValue(\"phaseId\", { label: phaseName, value: phaseId });\n\t\t\t\tsetPhaseId({ label: phaseName, value: phaseId });\n\t\t\t}\n\t\t\tif (shiftId) {\n\t\t\t\tsetValue(\"shiftId\", { label: shiftName, value: shiftId });\n\t\t\t}\n\t\t}\n\t}, [fetchArgs]);\n\n\treturn (\n\t\t<CustomDialog\n\t\t\ttitle={userTranslation.t(\"USER\") + \" \" + constantTranslations.t(\"FILTERS\")}\n\t\t\tactions={[\n\t\t\t\t{\n\t\t\t\t\ttitle: constantTranslations.t(\"FILTER\"),\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tconst data = getValues();\n\t\t\t\t\t\tsubmitFilter(data);\n\t\t\t\t\t\tdispatch(closeDialog());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]}\n\t\t>\n\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t<UserFilterForm\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\terrors={errors}\n\t\t\t\t\tfilter={true}\n\t\t\t\t\tsetValue={setValue}\n\t\t\t\t\tphaseId={phaseId}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</CustomDialog>\n\t);\n};\n\nexport default UserFilterDialogForm;\n","import { TableAction } from \"app/shared-components/custom-table/CustomTable\";\nimport FuseSvgIcon from \"@fuse/core/FuseSvgIcon\";\n\ntype HandleEdit = (BaseSyntheticEvent) => void;\n\nconst UserTableActions = (handleEdit: HandleEdit): Array<TableAction> => [\n\t{\n\t\tlabel: \"EDIT\",\n\t\ticon: (\n\t\t\t<FuseSvgIcon\n\t\t\t\tclassName=\"pointer-events-none\"\n\t\t\t\tsize={24}\n\t\t\t>\n\t\t\t\tmaterial-outline:edit\n\t\t\t</FuseSvgIcon>\n\t\t),\n\t\ticonColor: \"success\",\n\t\tonClick: handleEdit\n\t}\n];\n\nexport default UserTableActions;\n","import { TableHeading } from \"app/shared-components/custom-table/CustomTable\";\n\nconst userImportDialogHeadings: () => Array<TableHeading> = () => [\n\t{\n\t\tkey: \"email\",\n\t\ttitle: \"EMAIL\"\n\t},\n\t{\n\t\tkey: \"name\",\n\t\ttitle: \"NAME\"\n\t},\n\t{\n\t\tkey: \"surname\",\n\t\ttitle: \"SURNAME\"\n\t}\n];\n\nexport default userImportDialogHeadings;\n","import { TextField } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport { useEffect, useState } from \"react\";\nimport { Control, Controller, FieldErrors, FieldValues } from \"react-hook-form\";\nimport FuseSvgIcon from \"@fuse/core/FuseSvgIcon\";\n\ntype CustomTextFieldProps = {\n\tcontrol: Control<any, any>;\n\tname: string;\n\tlabel: string;\n\terrors: FieldErrors<FieldValues>;\n\taccept?: string;\n\tsetFile?: React.Dispatch<React.SetStateAction<File | undefined>>;\n\t[other: string]: any;\n};\n\nconst CustomFileUploadField = (props: CustomTextFieldProps) => {\n\tconst { control, name, label, errors, accept, setFile, ...other } = props;\n\tconst useStyles = makeStyles({\n\t\tcustomTextField: {\n\t\t\t\"& input::placeholder\": {\n\t\t\t\tfontSize: \"1rem\"\n\t\t\t},\n\t\t\t\"& input::file-selector-button\": {\n\t\t\t\tdisplay: \"none\"\n\t\t\t}\n\t\t}\n\t});\n\tconst [customClass, setCustomClass] = useState(\"mt-12 shrink-0 \");\n\n\tuseEffect(() => {\n\t\tif (other[\"dialog\"]) {\n\t\t\tsetCustomClass((state) => state + \"w-full \");\n\t\t\tif (other[\"col2\"]) {\n\t\t\t\tsetCustomClass((state) => state + \"col-span-4 md:col-span-2 \");\n\t\t\t}\n\t\t} else if (other[\"double\"]) {\n\t\t\tsetCustomClass((state) => state + \"w-[49%] \");\n\t\t} else if (other[\"filter\"]) {\n\t\t\tsetCustomClass((state) => state + \"w-1/8 \");\n\t\t} else {\n\t\t\tsetCustomClass((state) => state + \"md:mx-6 w-full md:w-[45%] \");\n\t\t}\n\t\treturn () => {\n\t\t\tsetCustomClass(\"mt-12 shrink-0 \");\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Controller\n\t\t\tname={name}\n\t\t\tcontrol={control}\n\t\t\trender={({ field }) => (\n\t\t\t\t<TextField\n\t\t\t\t\t{...field}\n\t\t\t\t\taria-label={label}\n\t\t\t\t\tclasses={{ root: useStyles().customTextField }}\n\t\t\t\t\tclassName={customClass}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\tid={name}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\terror={!!errors[name]}\n\t\t\t\t\thelperText={(errors[name]?.message as string) || \" \"}\n\t\t\t\t\tonChange={(event: React.ChangeEvent<HTMLInputElement>) => setFile(event.target.files?.[0])}\n\t\t\t\t\taria-required={other[\"required\"] ? \"true\" : \"false\"}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t\t<FuseSvgIcon\n\t\t\t\t\t\t\t\tclassName=\"text-48\"\n\t\t\t\t\t\t\t\tsize={24}\n\t\t\t\t\t\t\t\tcolor=\"action\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tmaterial-solid:arrow_drop_down\n\t\t\t\t\t\t\t</FuseSvgIcon>\n\t\t\t\t\t\t)\n\t\t\t\t\t}}\n\t\t\t\t\t{...other}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n};\n\nexport default CustomFileUploadField;\n","import { apiService as api } from \"app/store/apiService\";\nimport { ITableUser, ITableUserArg, IUser, IUserEssentials } from \"./UserModel\";\n\nexport const addTagTypes = [\"user/fetchAll\", \"user/fetchOne\"] as const;\n\nconst UserApi = api.enhanceEndpoints({ addTagTypes }).injectEndpoints({\n\tendpoints: (build) => ({\n\t\tgetAllUsers: build.query<GetUsersApiResponse, GetUsersApiArg>({\n\t\t\tquery: ({ businessId, page, pageSize, sortBy, sortOrder, filter, employeeId, email, name, phaseId, shiftId }) => {\n\t\t\t\tlet params = \"?\";\n\n\t\t\t\tif (page) params += `page=${page}&`;\n\t\t\t\tif (pageSize) params += `pageSize=${pageSize}&`;\n\t\t\t\tif (sortBy) params += `sortBy=${sortBy}&`;\n\t\t\t\tif (sortOrder) params += `sortOrder=${sortOrder}&`;\n\t\t\t\tif (filter) params += `filter=${filter}&`;\n\t\t\t\tif (employeeId) params += `employeeId=${employeeId}&`;\n\t\t\t\tif (email) params += `email=${email}&`;\n\t\t\t\tif (name) params += `name=${name}&`;\n\t\t\t\tif (phaseId) params += `phaseId=${phaseId}&`;\n\t\t\t\tif (shiftId) params += `shiftId=${shiftId}&`;\n\n\t\t\t\treturn {\n\t\t\t\t\turl: `/users/getusers/${businessId}${params}`\n\t\t\t\t};\n\t\t\t},\n\t\t\tprovidesTags: [\"user/fetchAll\"]\n\t\t}),\n\t\tgetOneUser: build.query<GetUserResponse, GetUserApiArg>({\n\t\t\tquery: (userId) => ({\n\t\t\t\turl: `/users/getusersbyid/${userId}`\n\t\t\t}),\n\t\t\tprovidesTags: [\"user/fetchOne\"]\n\t\t}),\n\t\tpostUser: build.mutation<PostUserApiResponse, PostUserApiArg>({\n\t\t\tquery: (queryArg) => ({\n\t\t\t\turl: `/users/addusers`,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: queryArg\n\t\t\t}),\n\t\t\tinvalidatesTags: [\"user/fetchAll\"]\n\t\t}),\n\t\tputUser: build.mutation<PutUserApiResponse, PutUserApiArg>({\n\t\t\tquery: (queryArg) => ({\n\t\t\t\turl: `/users/updateusers`,\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\tdata: queryArg\n\t\t\t}),\n\t\t\tinvalidatesTags: [\"user/fetchAll\", \"user/fetchOne\"]\n\t\t}),\n\t\tdeleteUser: build.mutation<void, DeleteUserApiArg>({\n\t\t\tquery: (userId) => ({\n\t\t\t\turl: `/users/deleteusers/${userId}`,\n\t\t\t\tmethod: \"DELETE\"\n\t\t\t}),\n\t\t\tinvalidatesTags: [\"user/fetchAll\"]\n\t\t}),\n\t\tpostBulkUserUpload: build.mutation<PostUserApiResponse, PostBulkUserApiArg>({\n\t\t\tquery: (queryArg) => ({\n\t\t\t\turl: `/users/bulkuserupload`,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: queryArg,\n\t\t\t\tformData: true\n\t\t\t}),\n\t\t\tinvalidatesTags: [\"user/fetchAll\"]\n\t\t}),\n\t\tpostAddMultipleUser: build.mutation<PostUserApiResponse, PostUserApiArg>({\n\t\t\tquery: (queryArg) => ({\n\t\t\t\turl: `/users/addmultipleusers`,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: queryArg\n\t\t\t}),\n\t\t\tinvalidatesTags: [\"user/fetchAll\"]\n\t\t})\n\t})\n});\n\nexport default UserApi;\n\nexport type GetUsersApiArg = ITableUserArg;\nexport type GetUsersApiResponse = ITableUser;\nexport type GetUserApiArg = string;\nexport type GetUserResponse = IUser;\nexport type PutUserApiResponse = boolean;\nexport type PutUserApiArg = IUser;\nexport type PostUserApiResponse = {\n\textraMessage: any;\n\tstatus?: boolean;\n\tmessage?: string;\n};\nexport type PostUserApiArg = IUserEssentials;\nexport type PostBulkUserApiArg = any;\nexport type DeleteUserApiArg = string;\n\nexport const { useGetOneUserQuery, useGetAllUsersQuery, usePutUserMutation, usePostUserMutation, useDeleteUserMutation, usePostBulkUserUploadMutation, usePostAddMultipleUserMutation } = UserApi;\n\nexport type UserApiType = {\n\t[UserApi.reducerPath]: ReturnType<typeof UserApi.reducer>;\n};\n","import CustomTextField from \"app/shared-components/custom-text-field/CustomTextField\";\nimport CustomFormDialog from \"app/shared-components/custom-form-dialog/CustomFormDialog\";\nimport { useTranslation } from \"react-i18next\";\nimport { CONSTANTS, SETTINGS_PAGE, USER_PAGE } from \"app/constants/TranslationNamespaces\";\nimport { z } from \"zod\";\nimport { EMPTY_ERROR_MESSAGE } from \"app/constants/FormErrors\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { showMessage } from \"@fuse/core/FuseMessage/fuseMessageSlice\";\nimport { snackbarDefaults } from \"app/constants/SnackbarDefaults\";\nimport { closeDialog } from \"@fuse/core/FuseDialog/fuseDialogSlice\";\nimport { showLoading } from \"app/shared-components/custom-loading/CustomLoadingSlice\";\nimport { IUser } from \"../UserModel\";\nimport CustomTable from \"app/shared-components/custom-table/CustomTable\";\nimport userImportDialogHeadings from \"../constants/userImportDialogHeadings\";\nimport SectionHeader from \"app/shared-components/section-header/SectionHeader\";\nimport { Box, Button, Typography } from \"@mui/material\";\nimport CustomFileUploadField from \"app/shared-components/custom-file-upload-field/CustomFileUploadField\";\nimport { usePostBulkUserUploadMutation } from \"../UserApi\";\n\ntype UserImportCsvDialogFormProps = {\n\tadd?: boolean;\n\tuserId?: string;\n};\n\nconst UserImportCsvDialogForm = (props: UserImportCsvDialogFormProps) => {\n\tconst settingsTranslation = useTranslation(SETTINGS_PAGE);\n\tconst constantTranslation = useTranslation(CONSTANTS);\n\tconst userTranslation = useTranslation(USER_PAGE);\n\tconst dispatch = useDispatch();\n\tconst { add, userId } = props;\n\tconst [skip, setSkip] = useState(true);\n\tconst [file, setFile] = useState<File | undefined>();\n\tconst [postBulkUser, postBulkUserResult] = usePostBulkUserUploadMutation();\n\t// const getUserById = useGetOneUserQuery(userId, { refetchOnMountOrArgChange: true, skip });\n\t// const [postUser, postUserResult] = usePostUserMutation();\n\t// const [putUser, putUserResult] = usePutUserMutation();\n\n\tuseEffect(() => {\n\t\tif (userId) {\n\t\t\tsetSkip(false);\n\t\t}\n\n\t\treturn () => setSkip(true);\n\t}, [userId]);\n\n\tconst defaultValues: IUser = {\n\t\tid: undefined,\n\t\tbusinessId: 1,\n\t\tfile: null\n\t};\n\n\tconst schema = z.object({\n\t\tid: z.number().optional(),\n\t\tbusinessId: z.number().optional(),\n\t\tfile: z\n\t\t\t.object({\n\t\t\t\tname: z.string().optional(),\n\t\t\t\ttype: z.string().optional(),\n\t\t\t\tsize: z.number().max(10485760, \"File size exceeds 10MB\") // 10MB limit\n\t\t\t})\n\t\t\t.nullable()\n\t});\n\n\tconst methods = useForm({\n\t\tmode: \"onChange\",\n\t\tdefaultValues: defaultValues,\n\t\tresolver: zodResolver(schema)\n\t});\n\n\tconst { handleSubmit, control, formState, setValue, reset, getValues } = methods;\n\tconst { isValid, errors, isDirty } = formState;\n\n\t// useEffect(() => {\n\t// \tconst { data, isSuccess, isLoading, isError, error } = getUserById;\n\n\t// \tdispatch(showLoading(isLoading));\n\n\t// \tif (isSuccess && data) {\n\t// \t\tObject.keys(data).forEach((key: any) => setValue(key, data[key]));\n\t// \t}\n\n\t// \tif (isError && error) {\n\t// \t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${settingsTranslation.t(\"BUSINESS_PHASE\")}`, \"error\")));\n\t// \t}\n\n\t// \treturn () => Object.keys(defaultValues).forEach((key: any) => setValue(key, defaultValues[key]));\n\t// }, [getUserById]);\n\n\t// const submitForm = (data: IUser) => {\n\t// \tif (add) {\n\t// \t\t// postUser(data);\n\t// \t} else {\n\t// \t\t// putUser(data);\n\t// \t}\n\t// \treset(data);\n\t// };\n\n\t// useEffect(() => {\n\t// \tconst { isError, isLoading, isSuccess, data, error } = postUserResult;\n\n\t// \tdispatch(showLoading(isLoading));\n\n\t// \tif (isSuccess && data) {\n\t// \t\tsetTimeout(() => {\n\t// \t\t\tdispatch(showMessage(snackbarDefaults(`${settingsTranslation.t(\"BUSINESS_PHASE\")} ${constantTranslation.t(\"ADD_SUCCESSFUL\")}`, \"success\")));\n\t// \t\t}, 250);\n\t// \t\tdispatch(closeDialog());\n\t// \t}\n\n\t// \tif (isError && error) {\n\t// \t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ADD_ERROR\")} ${settingsTranslation.t(\"BUSINESS_PHASE\")}`, \"error\")));\n\t// \t}\n\t// }, [postUserResult]);\n\n\t// useEffect(() => {\n\t// \tconst { isError, isLoading, isSuccess, data, error } = putUserResult;\n\n\t// \tdispatch(showLoading(isLoading));\n\n\t// \tif (isSuccess && data) {\n\t// \t\tsetTimeout(() => {\n\t// \t\t\tdispatch(showMessage(snackbarDefaults(`${settingsTranslation.t(\"BUSINESS_PHASE\")} ${constantTranslation.t(\"SAVE_SUCCESSFUL\")}`, \"success\")));\n\t// \t\t}, 250);\n\t// \t\tdispatch(closeDialog());\n\t// \t}\n\n\t// \tif (isError && error) {\n\t// \t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"SAVE_ERROR\")} ${settingsTranslation.t(\"BUSINESS_PHASE\")}`, \"error\")));\n\t// \t}\n\t// }, [putUserResult]);\n\t// console.log(control._formValues);\n\n\tuseEffect(() => {\n\t\tif (file) {\n\t\t\tconsole.log(file);\n\t\t}\n\t}, [file]);\n\n\tconst submitForm = (data: IUser) => {\n\t\tconsole.log(data.file);\n\t\treset(defaultValues);\n\t};\n\n\tconst handleUpload = () => {\n\t\tif (file) {\n\t\t\tconsole.log(file);\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append(\"fileData\", file);\n\t\t\t// formData.append(\"fileData\", file);\n\t\t\tconsole.log(formData.get(\"fileData\"));\n\t\t\tpostBulkUser(formData);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tconst { isError, isLoading, isSuccess, data, error } = postBulkUserResult;\n\n\t\tdispatch(showLoading(isLoading));\n\n\t\tif (isSuccess && data) {\n\t\t\tconsole.log(data);\n\t\t\tsetTimeout(() => {\n\t\t\t\tdispatch(showMessage(snackbarDefaults(`${userTranslation.t(\"BULK_USER\")} ${constantTranslation.t(\"UPLOAD_SUCCESSFUL\")}`, \"success\")));\n\t\t\t}, 250);\n\t\t\tdispatch(closeDialog());\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"UPLOAD_ERROR\")} ${userTranslation.t(\"BULK_USER\")}`, \"error\")));\n\t\t}\n\t}, [postBulkUserResult]);\n\n\treturn (\n\t\t<CustomFormDialog\n\t\t\tisValid={isValid}\n\t\t\tisDirty={isDirty}\n\t\t\tactions={[{ title: constantTranslation.t(\"Import\"), onClick: handleSubmit((data) => submitForm(data)) }]}\n\t\t\thandleSubmit={handleSubmit((data) => submitForm(data))}\n\t\t\ttitle={userTranslation.t(\"BULK_USER_UPLOAD\")}\n\t\t>\n\t\t\t<div className=\"w-full  mb-8\">\n\t\t\t\t<Typography\n\t\t\t\t\tcomponent=\"h4\"\n\t\t\t\t\tclassName=\"flex-1 text-lg md:text-xl font-bold tracking-tight leading-4 sm:leading-7 whitespace-nowrap\"\n\t\t\t\t>\n\t\t\t\t\t{constantTranslation.t(\"SELECT_FILE\")}\n\t\t\t\t</Typography>\n\n\t\t\t\t<CustomFileUploadField\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\tname=\"file\"\n\t\t\t\t\tlabel={constantTranslation.t(\"SELECT_FILE\")}\n\t\t\t\t\terrors={errors}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true\n\t\t\t\t\t}}\n\t\t\t\t\tdialog=\"true\"\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tsetFile={setFile}\n\t\t\t\t/>\n\t\t\t\t<div className=\"flex flex-row justify-end px-12 mb-8\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={`rounded-md py-16 mb-12 lg:w-1/2 w-full`}\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tonClick={handleUpload}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"mx-48 whitespace-nowrap\">{constantTranslation.t(\"UPLOAD\")}</span>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"w-full mb-48\">\n\t\t\t\t<div className=\"w-full flex my-8\">\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tcomponent=\"h4\"\n\t\t\t\t\t\tclassName=\"flex-1 text-lg md:text-xl font-bold tracking-tight leading-4 sm:leading-7 whitespace-nowrap\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{constantTranslation.t(\"PREVIEW\")}\n\t\t\t\t\t</Typography>\n\t\t\t\t</div>\n\t\t\t\t<CustomTable\n\t\t\t\t\tshowId={true}\n\t\t\t\t\ttableLabel={userTranslation.t(\"USERS\")}\n\t\t\t\t\ttableHeadings={userImportDialogHeadings()}\n\t\t\t\t\tt={userTranslation.t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</CustomFormDialog>\n\t);\n};\n\nexport default UserImportCsvDialogForm;\n","import { TabItemType } from \"app/shared-components/custom-tabs/CustomTabs\";\n\nconst userDialogTabItems: () => Array<TabItemType> = () => [\n\t{ key: \"info\", label: \"INFO\" },\n\t{ key: \"organisation\", label: \"ORGANISATION\" },\n\t{ key: \"audit\", label: \"AUDIT\" }\n];\n\nexport default userDialogTabItems;\n","import { CONSTANTS, USER_PAGE } from \"app/constants/TranslationNamespaces\";\nimport CustomTextField from \"app/shared-components/custom-text-field/CustomTextField\";\nimport { Control, FieldErrors } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { IUser } from \"../../../UserModel\";\n\ntype InfoProps = {\n\tcontrol: Control<IUser, any>;\n\terrors: FieldErrors<IUser>;\n};\n\nconst Info = (props: InfoProps) => {\n\tconst { control, errors } = props;\n\tconst userTranslation = useTranslation(USER_PAGE);\n\tconst constantTranslation = useTranslation(CONSTANTS);\n\n\treturn (\n\t\t<div className=\"mt-12 w-full\">\n\t\t\t<div className=\"flex md:gap-12 flex-col md:flex-row\">\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomTextField\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"employeeId\"\n\t\t\t\t\t\tlabel={userTranslation.t(\"EMPLOYEE_ID\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdialog=\"true\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomTextField\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tlabel={constantTranslation.t(\"NAME\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdialog=\"true\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex md:gap-12 flex-col md:flex-row\">\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomTextField\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tlabel={userTranslation.t(\"EMAIL\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdialog=\"true\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomTextField\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"surname\"\n\t\t\t\t\t\tlabel={userTranslation.t(\"SURNAME\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdialog=\"true\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Info;\n","import { CONSTANTS, SETTINGS_PAGE, SHIFTS_PAGE, USER_PAGE } from \"app/constants/TranslationNamespaces\";\nimport CustomAutoComplete from \"app/shared-components/custom-auto-complete/CustomAutoComplete\";\nimport CustomDatePickerField from \"app/shared-components/custom-date-picker-field/CustomDatePickerField\";\nimport CustomTextField from \"app/shared-components/custom-text-field/CustomTextField\";\nimport { Control, FieldErrors } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { IUser } from \"../../../UserModel\";\nimport CustomSelectField, { SelectList } from \"app/shared-components/custom-select-field/CustomSelectField\";\nimport { selectListUserStarts } from \"../../../constants/selectListUserStarts\";\nimport { useEffect } from \"react\";\n\ntype OrganisationProps = {\n\tcontrol: Control<IUser, any>;\n\terrors: FieldErrors<IUser>;\n\tphases: Array<SelectList>;\n\tonPhasesScroll: () => void;\n\tphaseInputChange: (newValue) => void;\n\tshifts: Array<SelectList>;\n\tonShiftsScroll: () => void;\n\tshiftsInputChange: (newValue) => void;\n\tcategories: Array<SelectList>;\n\tusersList: Array<SelectList>;\n\tonUsersListScroll: () => void;\n\tusersListInputChange: (newValue) => void;\n\tselectedShift: SelectList;\n\tselectedPhase: SelectList;\n\tsetSelectedPhase: React.Dispatch<React.SetStateAction<SelectList>>;\n\tsetSelectedShift: React.Dispatch<React.SetStateAction<SelectList>>;\n\tsetSelectedDelegateUser: React.Dispatch<React.SetStateAction<SelectList>>;\n\tsetSelectedEscalationManager: React.Dispatch<React.SetStateAction<SelectList>>;\n\tsetUserCategoryId: React.Dispatch<React.SetStateAction<any>>;\n\tisPhaseShiftDisabled?: Boolean;\n};\n\nconst Organisation = (props: OrganisationProps) => {\n\tconst {\n\t\tcontrol,\n\t\terrors,\n\t\tphases,\n\t\tonPhasesScroll,\n\t\tphaseInputChange,\n\t\tshifts,\n\t\tonShiftsScroll,\n\t\tshiftsInputChange,\n\t\tcategories,\n\t\tusersList,\n\t\tonUsersListScroll,\n\t\tusersListInputChange,\n\t\tsetSelectedPhase,\n\t\tselectedPhase,\n\t\tsetSelectedShift,\n\t\tselectedShift,\n\t\tsetSelectedDelegateUser,\n\t\tsetSelectedEscalationManager,\n\t\tsetUserCategoryId,\n\t\tisPhaseShiftDisabled\n\t} = props;\n\tconst userTranslation = useTranslation(USER_PAGE);\n\tconst constantTranslation = useTranslation(CONSTANTS);\n\tconst shiftsTranslation = useTranslation(SHIFTS_PAGE);\n\tconst settingsTranslation = useTranslation(SETTINGS_PAGE);\n\n\treturn (\n\t\t<div className=\"mt-12 w-full lg:w-[25vw]\">\n\t\t\t<div className=\"flex gap-12 flex-row\">\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomTextField\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"area\"\n\t\t\t\t\t\tlabel={userTranslation.t(\"AREA\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\treadOnly: true,\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdialog=\"true\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomSelectField\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"categoryId\"\n\t\t\t\t\t\tlabel={constantTranslation.t(\"CATEGORY\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tdialog={true}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tselectList={categories}\n\t\t\t\t\t\tonSelectState={setUserCategoryId}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex gap-12 flex-row\">\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomAutoComplete\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"phaseId\"\n\t\t\t\t\t\tlabel={constantTranslation.t(\"PHASE\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tfilter={true}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisableClearable={true}\n\t\t\t\t\t\tselectList={phases}\n\t\t\t\t\t\tonScrollFunc={onPhasesScroll}\n\t\t\t\t\t\tonInputChange={phaseInputChange}\n\t\t\t\t\t\tonSelectState={setSelectedPhase}\n\t\t\t\t\t\tselectedState={selectedPhase}\n\t\t\t\t\t\tdisabled={isPhaseShiftDisabled}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomAutoComplete\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"shiftId\"\n\t\t\t\t\t\tlabel={shiftsTranslation.t(\"SHIFT\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tfilter={true}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisableClearable={true}\n\t\t\t\t\t\tselectList={shifts}\n\t\t\t\t\t\tonScrollFunc={onShiftsScroll}\n\t\t\t\t\t\tonInputChange={shiftsInputChange}\n\t\t\t\t\t\tonSelectState={setSelectedShift}\n\t\t\t\t\t\tselectedState={selectedShift}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tdisabled={isPhaseShiftDisabled}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex gap-12 flex-row\">\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomDatePickerField\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"startDate\"\n\t\t\t\t\t\tlabel={constantTranslation.t(\"START_DATE\") + \" *\"}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tslotProps={{\n\t\t\t\t\t\t\ttextField: { InputLabelProps: { shrink: true } }\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tfilter=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex md:gap-12 flex-col md:flex-row\">\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomAutoComplete\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"delegateUserId\"\n\t\t\t\t\t\tlabel={userTranslation.t(\"DELEGATE\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tfilter={true}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tselectList={usersList}\n\t\t\t\t\t\tonScrollFunc={onUsersListScroll}\n\t\t\t\t\t\tonInputChange={usersListInputChange}\n\t\t\t\t\t\tonSelectState={setSelectedDelegateUser}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<CustomAutoComplete\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tname=\"escalationManagerId\"\n\t\t\t\t\t\tlabel={userTranslation.t(\"BU_MANAGER\")}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\tfilter={true}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tselectList={usersList}\n\t\t\t\t\t\tonScrollFunc={onUsersListScroll}\n\t\t\t\t\t\tonInputChange={usersListInputChange}\n\t\t\t\t\t\tonSelectState={setSelectedEscalationManager}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Organisation;\n","import { Typography } from \"@mui/material\";\nimport { USER_PAGE } from \"app/constants/TranslationNamespaces\";\nimport moment from \"moment\";\nimport { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\ntype AuditProps = {\n\tauditData: {\n\t\tlastLogin: string;\n\t\tcreated: string;\n\t\tcreatedBy: string;\n\t};\n\tadd?: boolean;\n};\n\nconst Audit = (props: AuditProps) => {\n\tconst { auditData, add } = props;\n\tconst userTranslation = useTranslation(USER_PAGE);\n\tconst [lastLogin, setLastLogin] = useState(\"\");\n\tconst [created, setCreated] = useState(\"\");\n\tconst [createdBy, setCreatedBy] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst dateFormatter = (date) => {\n\t\t\tconst result = moment(date).format(\"HH:mm MM-DD-YYYY\");\n\t\t\treturn result;\n\t\t};\n\n\t\tsetLastLogin(dateFormatter(auditData.lastLogin));\n\t\tsetCreated(dateFormatter(auditData.created));\n\t\tsetCreatedBy(auditData.createdBy);\n\t}, [auditData]);\n\n\treturn (\n\t\t<div className=\"w-full lg:w-[25vw] flex flex-col gap-16 my-16\">\n\t\t\t<Typography>\n\t\t\t\t<span className=\"font-600\">{userTranslation.t(\"LAST_LOGIN\")}</span>: {add ? \"\" : lastLogin}\n\t\t\t</Typography>\n\t\t\t<Typography>\n\t\t\t\t<span className=\"font-600\">{userTranslation.t(\"CREATED\")}</span>: {add ? \"\" : created}\n\t\t\t</Typography>\n\t\t\t<Typography>\n\t\t\t\t<span className=\"font-600\">{userTranslation.t(\"CREATED_BY\")}</span>: {add ? \"\" : createdBy}\n\t\t\t</Typography>\n\t\t</div>\n\t);\n};\n\nexport default Audit;\n","import CustomFormDialog from \"app/shared-components/custom-form-dialog/CustomFormDialog\";\nimport { useTranslation } from \"react-i18next\";\nimport { CONSTANTS, SETTINGS_PAGE, SHIFTS_PAGE, USER_PAGE } from \"app/constants/TranslationNamespaces\";\nimport { z } from \"zod\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { showMessage } from \"@fuse/core/FuseMessage/fuseMessageSlice\";\nimport { snackbarDefaults } from \"app/constants/SnackbarDefaults\";\nimport { closeDialog } from \"@fuse/core/FuseDialog/fuseDialogSlice\";\nimport { showLoading } from \"app/shared-components/custom-loading/CustomLoadingSlice\";\nimport { ITableUserArg, IUser } from \"../UserModel\";\nimport { Box, Button } from \"@mui/material\";\nimport CustomTabs from \"app/shared-components/custom-tabs/CustomTabs\";\nimport userDialogTabItems from \"../constants/userDialogTabItems\";\nimport CustomTabPanel from \"app/shared-components/custom-tab-panel/CustomTabPanel\";\nimport Info from \"./user-dialog-tabs/info/Info\";\nimport Organisation from \"./user-dialog-tabs/organisation/Organisation\";\nimport Audit from \"./user-dialog-tabs/audit/Audit\";\nimport { SelectList } from \"app/shared-components/custom-select-field/CustomSelectField\";\nimport { useDeleteUserMutation, useGetAllUsersQuery, useGetOneUserQuery, usePostUserMutation, usePutUserMutation } from \"../UserApi\";\nimport moment from \"moment\";\nimport { BUSINESS_AREA } from \"../../settings/constants/defaultValues\";\nimport { ITableBusinessPhaseArg } from \"../../settings/tabs/business-phases/BusinessPhasesModel\";\nimport { SortOrder } from \"app/constants/DefaultInterfaces\";\nimport { DEFAULT_PAGE_SIZE } from \"app/constants/DefaultConfig\";\nimport { useGetAllBusinessPhasesQuery } from \"../../settings/tabs/business-phases/BusinessPhasesApi\";\nimport { ITableShiftsArg } from \"../../shifts/tabs/shifts/ShiftsModel\";\nimport { useGetAllShiftsQuery } from \"../../shifts/tabs/shifts/ShiftsApi\";\nimport { ITableUserCategoriesArg } from \"../../settings/tabs/user-categories/UserCategoriesModel\";\nimport { useGetAllUserCategoriesQuery, useGetOneUserCategoryQuery } from \"../../settings/tabs/user-categories/UserCategoriesApi\";\nimport { useGetBusinessInfoQuery } from \"../../settings/tabs/business-info/BusinessInfoApi\";\nimport { useGetAllRolesQuery } from \"src/app/main/features/roles/RolesApi\";\n\ntype UserDialogFormProps = {\n\tadd?: boolean;\n\tuserId?: string;\n};\n\nconst UserDialogForm = (props: UserDialogFormProps) => {\n\tconst settingsTranslation = useTranslation(SETTINGS_PAGE);\n\tconst constantTranslation = useTranslation(CONSTANTS);\n\tconst userTranslation = useTranslation(USER_PAGE);\n\tconst shiftsTranslation = useTranslation(SHIFTS_PAGE);\n\n\tconst dispatch = useDispatch();\n\tconst { add, userId } = props;\n\tconst [skip, setSkip] = useState(true);\n\tconst [userTab, setUserTab] = useState(0);\n\tconst getUserById = useGetOneUserQuery(userId, { refetchOnMountOrArgChange: true, skip });\n\tconst [postUser, postUserResult] = usePostUserMutation();\n\tconst [putUser, putUserResult] = usePutUserMutation();\n\tconst [deleteUser, deleteUserResult] = useDeleteUserMutation();\n\tconst [auditData, setAuditData] = useState({ lastLogin: \"\", createdBy: \"\", created: \"\" });\n\tconst [selectedPhase, setSelectedPhase] = useState<SelectList>();\n\tconst [selectedShift, setSelectedShift] = useState<SelectList>();\n\tconst [selectedDelegateUser, setSelectedDelegateUser] = useState<SelectList>();\n\tconst [selectedEscalationManager, setSelectedEscalationManager] = useState<SelectList>();\n\n\tconst [phaseFetchArg, setPhaseFetchArg] = useState<ITableBusinessPhaseArg>({ businessId: 1, pageSize: DEFAULT_PAGE_SIZE, sortBy: \"name\", sortOrder: SortOrder.ASCENDING, page: 1 });\n\tconst getBusinessPhases = useGetAllBusinessPhasesQuery(phaseFetchArg);\n\tconst [phases, setPhases] = useState<Array<SelectList>>([]);\n\tconst [totalPhases, setTotalPhases] = useState(0);\n\n\tconst [shiftsFetchArg, setShiftsFetchArg] = useState<ITableShiftsArg>({ businessId: 1, pageSize: DEFAULT_PAGE_SIZE, sortBy: \"name\", sortOrder: SortOrder.ASCENDING, page: 1 });\n\tconst [skipShiftsFetch, setSkipShiftsFetch] = useState(true);\n\tconst getShifts = useGetAllShiftsQuery(shiftsFetchArg, { refetchOnMountOrArgChange: true, skip: skipShiftsFetch });\n\tconst [shifts, setShifts] = useState<Array<SelectList>>([]);\n\tconst [totalShifts, setTotalShifts] = useState(0);\n\tconst [shiftIdOnEdit, setShiftIdOnEdit] = useState();\n\n\tconst [categoriesFetchArg, setCategoriesFetchArg] = useState<ITableUserCategoriesArg>({ businessId: 1, pageSize: DEFAULT_PAGE_SIZE, sortBy: \"category\", sortOrder: SortOrder.ASCENDING, page: 1 });\n\tconst getCategories = useGetAllUserCategoriesQuery(categoriesFetchArg);\n\tconst [categories, setCategories] = useState<Array<SelectList>>([]);\n\tconst [totalCategories, setTotalCategories] = useState(0);\n\n\tconst [usersListFetchArg, setUsersListFetchArg] = useState<ITableUserArg>({ businessId: 1, pageSize: DEFAULT_PAGE_SIZE, sortBy: \"name\", sortOrder: SortOrder.ASCENDING, page: 1 });\n\tconst getUsersList = useGetAllUsersQuery(usersListFetchArg);\n\tconst [usersList, setUsersList] = useState<Array<SelectList>>([]);\n\tconst [totalUsersList, setTotalUsersList] = useState(0);\n\n\tconst getBusinessInfo = useGetBusinessInfoQuery(\"1\");\n\tconst [area, setArea] = useState(\"\");\n\n\tconst [userCategoryId, setUserCategoryId] = useState();\n\tconst [skipUserCategoryId, setSkipUserCategoryId] = useState(true);\n\tconst getUserCategoryById = useGetOneUserCategoryQuery(userCategoryId, { refetchOnMountOrArgChange: true, skip: skipUserCategoryId });\n\tconst getRoles = useGetAllRolesQuery(undefined, { refetchOnMountOrArgChange: true });\n\tconst [roles, setRoles] = useState<Array<SelectList>>([]);\n\n\tconst [isPhaseShiftDisabled, setIsPhaseShiftDisabled] = useState(true);\n\n\tuseEffect(() => {\n\t\tif (userId) {\n\t\t\tsetSkip(false);\n\t\t}\n\n\t\treturn () => setSkip(true);\n\t}, [userId]);\n\n\tconst defaultValues: IUser = {\n\t\tid: undefined,\n\t\temployeeId: \"\",\n\t\tbusinessId: 1,\n\t\tname: \"\",\n\t\tsurname: \"\",\n\t\temail: \"\",\n\t\tphaseId: undefined,\n\t\tphaseName: \"\",\n\t\tshiftId: undefined,\n\t\tshiftName: \"\",\n\t\tcategoryId: 0,\n\t\tcategory: \"\",\n\t\tinitialShiftPart: 1,\n\t\tdelegateUserId: undefined,\n\t\tescalationManagerId: undefined,\n\t\tarea: BUSINESS_AREA,\n\t\tstartDate: new Date()\n\t};\n\n\tconst schema = z.object({\n\t\tid: z.number().optional(),\n\t\tbusinessId: z.number().optional(),\n\t\temployeeId: z.string().min(1).max(256),\n\t\tname: z.string().min(1).max(256),\n\t\tsurname: z.string().min(1).max(256),\n\t\temail: z.string().min(1).max(256),\n\t\tphaseId: z.any().refine((value) => value !== undefined, {\n\t\t\tmessage: \"Phase must be selected\"\n\t\t}),\n\t\tphaseName: z.string().optional(),\n\t\tshiftId: z.any().refine((value) => value !== undefined, {\n\t\t\tmessage: \"Shift must be selected\"\n\t\t}),\n\t\tshiftName: z.string().optional(),\n\t\tcategoryId: z.number().refine((value) => value !== 0 && value !== null && value !== undefined, {\n\t\t\tmessage: \"Category must be selected\"\n\t\t}),\n\t\tcategory: z.string().optional(),\n\t\tdelegateUserId: z.any(),\n\t\tescalationManagerId: z.any(),\n\t\tinitialShiftPart: z.any().optional(),\n\t\tarea: z.string().readonly(),\n\t\tstartDate: z.date()\n\t});\n\n\tconst methods = useForm({\n\t\tmode: \"onChange\",\n\t\tdefaultValues: defaultValues,\n\t\tresolver: zodResolver(schema)\n\t});\n\n\tconst { handleSubmit, control, formState, setValue, reset, getValues, trigger } = methods;\n\tconst { isValid, errors, isDirty } = formState;\n\n\tuseEffect(() => {\n\t\tif (userCategoryId) {\n\t\t\tsetSkipUserCategoryId(false);\n\t\t}\n\t}, [userCategoryId]);\n\n\tuseEffect(() => {\n\t\tconst { data, isSuccess, isLoading, isError, error } = getUserCategoryById;\n\n\t\tdispatch(showLoading(isLoading));\n\n\t\tif (isSuccess && data) {\n\t\t\tconst selectedRole = roles.filter((role) => role.value == data.roleId);\n\t\t\tconst boolValue = !!!(selectedRole?.[0]?.label === \"General User\");\n\t\t\tsetIsPhaseShiftDisabled(boolValue);\n\t\t\tif (boolValue) {\n\t\t\t\tsetSelectedPhase(null);\n\t\t\t\tsetSelectedShift(null);\n\t\t\t\tsetSkipShiftsFetch(true);\n\n\t\t\t\tsetValue(\"shiftId\", null);\n\t\t\t\tsetValue(\"phaseId\", null);\n\t\t\t\ttrigger(\"shiftId\");\n\t\t\t\ttrigger(\"phaseId\");\n\t\t\t} else if (!boolValue && !!!selectedPhase && !!!selectedShift) {\n\t\t\t\tsetValue(\"phaseId\", undefined);\n\t\t\t\tsetValue(\"shiftId\", undefined);\n\t\t\t\ttrigger(\"shiftId\");\n\t\t\t\ttrigger(\"phaseId\");\n\t\t\t\tsetValue(\"shiftId\", null);\n\t\t\t\tsetValue(\"phaseId\", null);\n\t\t\t}\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${settingsTranslation.t(\"USER_CATEGORY\")}`, \"error\")));\n\t\t}\n\t}, [getUserCategoryById]);\n\n\tuseEffect(() => {\n\t\tconst { data, isSuccess, isLoading, isError, error } = getRoles;\n\n\t\tdispatch(showLoading(isLoading));\n\n\t\tif (isSuccess && data) {\n\t\t\tdata.map((role) =>\n\t\t\t\tsetRoles((state) => {\n\t\t\t\t\tlet newState = state;\n\t\t\t\t\tnewState.push({ label: role.name, value: role.id });\n\t\t\t\t\treturn newState;\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${constantTranslation.t(\"ROLE\")}`, \"error\")));\n\t\t}\n\n\t\treturn () => setRoles([]);\n\t}, [getRoles]);\n\n\tuseEffect(() => {\n\t\tconst { data, isError, isLoading, isSuccess, error } = getBusinessInfo;\n\n\t\tdispatch(showLoading(isLoading));\n\n\t\tif (isSuccess && data) {\n\t\t\tsetArea(data[\"area\"]);\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${settingsTranslation.t(\"BUSINESS_INFO\")}`, \"error\")));\n\t\t}\n\t}, [getBusinessInfo]);\n\n\tfunction fullName(name: string, surname: string): string {\n\t\tif (!name && !surname) {\n\t\t\treturn \"\";\n\t\t} else if (name && !surname) {\n\t\t\treturn name;\n\t\t} else if (name && surname) {\n\t\t\treturn name + \" \" + surname;\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tconst { isSuccess, data: rawData, isLoading, isFetching, isError, error } = getUsersList;\n\n\t\tdispatch(showLoading(isLoading));\n\t\tdispatch(showLoading(isFetching));\n\n\t\tif (isSuccess && rawData) {\n\t\t\tconst { data, totalCount } = rawData;\n\t\t\tdata.map((item) => {\n\t\t\t\tif (usersList.filter((user) => user.value == item.id).length === 0) {\n\t\t\t\t\tsetUsersList((state) => [...state, { label: fullName(item.name, item.surname), value: item.id }]);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetTotalUsersList((state) => {\n\t\t\t\tif (usersListFetchArg.filter) {\n\t\t\t\t\treturn state;\n\t\t\t\t} else {\n\t\t\t\t\treturn totalCount;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${userTranslation.t(\"USERS\")}`, \"error\")));\n\t\t}\n\t}, [getUsersList]);\n\n\tuseEffect(() => {\n\t\tconst { isSuccess, data: rawData, isLoading, isFetching, isError, error } = getCategories;\n\n\t\tdispatch(showLoading(isLoading));\n\t\tdispatch(showLoading(isFetching));\n\n\t\tif (isSuccess && rawData) {\n\t\t\tconst { data, totalCount } = rawData;\n\t\t\tdata.map((item) => {\n\t\t\t\tif (categories.filter((category) => category.value == item.id).length === 0) {\n\t\t\t\t\tsetCategories((state) => [...state, { label: item.category, value: item.id }]);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetTotalCategories((state) => {\n\t\t\t\tif (categoriesFetchArg.filter) {\n\t\t\t\t\treturn state;\n\t\t\t\t} else {\n\t\t\t\t\treturn totalCount;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${settingsTranslation.t(\"CATEGORIES\")}`, \"error\")));\n\t\t}\n\t}, [getCategories]);\n\n\tuseEffect(() => {\n\t\tconst { isSuccess, data: rawData, isLoading, isFetching, isError, error } = getShifts;\n\n\t\tdispatch(showLoading(isLoading));\n\t\tdispatch(showLoading(isFetching));\n\n\t\tif (isSuccess && rawData) {\n\t\t\tconst { data, totalCount } = rawData;\n\t\t\tconst newShiftsData = data.map((item) => ({ label: item.name, value: item.id }));\n\t\t\tsetShifts([...newShiftsData]);\n\n\t\t\tsetTotalShifts((state) => {\n\t\t\t\tif (shiftsFetchArg.filter) {\n\t\t\t\t\treturn state;\n\t\t\t\t} else {\n\t\t\t\t\treturn totalCount;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${settingsTranslation.t(\"SHIFT\")}`, \"error\")));\n\t\t}\n\t}, [getShifts]);\n\n\tuseEffect(() => {\n\t\tconst { isSuccess, data: rawData, isLoading, isFetching, isError, error } = getBusinessPhases;\n\n\t\tdispatch(showLoading(isLoading));\n\t\tdispatch(showLoading(isFetching));\n\n\t\tif (isSuccess && rawData) {\n\t\t\tconst { data, totalCount } = rawData;\n\n\t\t\tdata.map((item) => {\n\t\t\t\tif (phases.filter((phase) => phase.value == item.id).length === 0) {\n\t\t\t\t\tsetPhases((state) => [...state, { label: item.name, value: item.id }]);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetTotalPhases((state) => {\n\t\t\t\tif (phaseFetchArg.filter) {\n\t\t\t\t\treturn state;\n\t\t\t\t} else {\n\t\t\t\t\treturn totalCount;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${settingsTranslation.t(\"BUSINESS_PHASES\")}`, \"error\")));\n\t\t}\n\t}, [getBusinessPhases]);\n\n\tconst onPhasesScroll = () => {\n\t\tif (phases.length < totalPhases) {\n\t\t\tsetPhaseFetchArg((state) => {\n\t\t\t\treturn { ...state, page: state.page + 1, filter: undefined };\n\t\t\t});\n\t\t}\n\t};\n\tconst onShiftsScroll = () => {\n\t\tif (shifts.length < totalShifts) {\n\t\t\tsetShiftsFetchArg((state) => {\n\t\t\t\treturn { ...state, page: state.page + 1, filter: undefined };\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onUsersListScroll = () => {\n\t\tif (usersList.length < totalUsersList) {\n\t\t\tsetUsersListFetchArg((state) => {\n\t\t\t\treturn { ...state, page: state.page + 1, filter: undefined };\n\t\t\t});\n\t\t}\n\t};\n\n\tconst phaseInputChange = (value) => {\n\t\tif (value) {\n\t\t\tsetTimeout(() => setPhaseFetchArg((state) => ({ ...state, filter: value })), 500);\n\t\t}\n\t};\n\tconst shiftsInputChange = (value) => {\n\t\tif (value) {\n\t\t\tsetTimeout(() => setShiftsFetchArg((state) => ({ ...state, filter: value })), 500);\n\t\t}\n\t};\n\n\tconst usersListInputChange = (value) => {\n\t\tif (value) {\n\t\t\tsetTimeout(() => setUsersListFetchArg((state) => ({ ...state, filter: value })), 500);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tconst { data, isSuccess, isLoading, isError, error } = getUserById;\n\n\t\tdispatch(showLoading(isLoading));\n\n\t\tif (isSuccess && data) {\n\t\t\tsetValue(\"area\", area);\n\t\t\tObject.keys(data).forEach((key: any) => {\n\t\t\t\tif (key === \"phaseId\") {\n\t\t\t\t\tsetValue(key, { value: data[key], label: data[\"phaseName\"] });\n\t\t\t\t\tsetSelectedPhase({ value: data[key], label: data[\"phaseName\"] });\n\t\t\t\t} else if (key === \"shiftId\") {\n\t\t\t\t\tsetValue(key, { value: data[key], label: data[\"shiftName\"] });\n\t\t\t\t\tsetShiftIdOnEdit(data[key]);\n\t\t\t\t} else if (key === \"categoryId\") {\n\t\t\t\t\tsetValue(key, data[key]);\n\t\t\t\t\tsetUserCategoryId(data[key]);\n\t\t\t\t} else if (key === \"delegateUserId\") {\n\t\t\t\t\tsetValue(key, { value: data[key], label: fullName(data[\"delegateUserName\"], data[\"delegateUserSurname\"]) });\n\t\t\t\t\tsetSelectedDelegateUser({ value: data[key], label: fullName(data[\"delegateUserName\"], data[\"delegateUserSurname\"]) });\n\t\t\t\t} else if (key === \"escalationManagerId\") {\n\t\t\t\t\tsetValue(key, { value: data[key], label: fullName(data[\"escalationManagerName\"], data[\"escalationManagerSurname\"]) });\n\t\t\t\t\tsetSelectedEscalationManager({ value: data[key], label: fullName(data[\"escalationManagerName\"], data[\"escalationManagerSurname\"]) });\n\t\t\t\t} else if (typeof data[key] === \"string\" && moment(data[key], moment.ISO_8601).isValid()) {\n\t\t\t\t\tsetValue(key, new Date(data[key]));\n\t\t\t\t} else {\n\t\t\t\t\tsetValue(key, data[key]);\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetAuditData({ lastLogin: data.lastLogin, createdBy: data.createdBy, created: data.created });\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${userTranslation.t(\"USER\")}`, \"error\")));\n\t\t}\n\n\t\treturn () => Object.keys(defaultValues).forEach((key: any) => setValue(key, defaultValues[key]));\n\t}, [getUserById]);\n\n\tuseEffect(() => {\n\t\tconsole.log(selectedPhase);\n\t\tif (selectedPhase) {\n\t\t\tsetSkipShiftsFetch(false);\n\t\t\tsetShiftsFetchArg((state) => ({ ...state, businessPhaseId: selectedPhase.value as number }));\n\t\t} else if (selectedPhase === null) {\n\t\t\tsetSkipShiftsFetch(true);\n\t\t\tsetShifts([]);\n\t\t\tsetSelectedShift(null);\n\t\t\tsetValue(\"shiftId\", null);\n\t\t}\n\n\t\t// this will clear the shift on phase change\n\t\tif (selectedPhase && selectedShift && Object.keys(selectedPhase).length && Object.keys(selectedShift).length) {\n\t\t\tsetSelectedShift(null);\n\t\t\tsetValue(\"shiftId\", null);\n\t\t}\n\t}, [selectedPhase]);\n\n\tuseEffect(() => {\n\t\tif (shifts.length > 0) {\n\t\t\tconst shiftValue = shifts.filter((shift) => shift.value === shiftIdOnEdit)[0];\n\t\t\tif (shiftValue) {\n\t\t\t\tsetValue(\"shiftId\", shiftValue);\n\t\t\t\tsetSelectedShift(shiftValue);\n\t\t\t\tsetShiftIdOnEdit(null);\n\t\t\t}\n\t\t} else if (shiftIdOnEdit === null) {\n\t\t\tsetSelectedShift(null);\n\t\t}\n\t}, [shifts]);\n\n\tconst submitForm = (data: IUser) => {\n\t\tif (add) {\n\t\t\tpostUser(data);\n\t\t} else {\n\t\t\tputUser(data);\n\t\t}\n\t\t// reset(data);\n\t};\n\n\tfunction containsText(message, text) {\n\t\tconst lowerCaseMessage = message.toLowerCase();\n\t\tconst searchString = text.toLowerCase();\n\n\t\treturn lowerCaseMessage.includes(searchString);\n\t}\n\n\tuseEffect(() => {\n\t\tconst { isError, isLoading, isSuccess, data, error } = postUserResult;\n\n\t\tdispatch(showLoading(isLoading));\n\n\t\tif (isSuccess && data) {\n\t\t\tif (data.status) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tdispatch(showMessage(snackbarDefaults(`${userTranslation.t(\"USER\")} ${constantTranslation.t(\"ADD_SUCCESSFUL\")}`, \"success\")));\n\t\t\t\t}, 250);\n\t\t\t\tdispatch(closeDialog());\n\t\t\t} else {\n\t\t\t\tif (data?.extraMessage?.[0]?.id === \"MAX_USERS_PER_SHIFT_ERROR\") {\n\t\t\t\t\tdispatch(showMessage(snackbarDefaults(`${userTranslation.t(\"ERROR_EMAIL_MESSAGE\")} ${data?.extraMessage?.[0]?.message?.[0]?.maxUsers}`, \"error\")));\n\t\t\t\t} else if (data.message === \"EMAIL_ALREADY_EXISTS\") {\n\t\t\t\t\tdispatch(showMessage(snackbarDefaults(`${userTranslation.t(\"ERROR_USER_MESSAGE\")}`, \"error\")));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ADD_ERROR\")} ${userTranslation.t(\"USER\")}`, \"error\")));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ADD_ERROR\")} ${userTranslation.t(\"USER\")}`, \"error\")));\n\t\t}\n\t}, [postUserResult]);\n\n\tuseEffect(() => {\n\t\tconst { isError, isLoading, isSuccess, data, error } = putUserResult;\n\n\t\tdispatch(showLoading(isLoading));\n\n\t\tif (isSuccess && data) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tdispatch(showMessage(snackbarDefaults(`${userTranslation.t(\"USER\")} ${constantTranslation.t(\"SAVE_SUCCESSFUL\")}`, \"success\")));\n\t\t\t}, 250);\n\t\t\tdispatch(closeDialog());\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"SAVE_ERROR\")} ${userTranslation.t(\"USER\")}`, \"error\")));\n\t\t}\n\t}, [putUserResult]);\n\n\tuseEffect(() => {\n\t\tconst { isSuccess, isError, error, isLoading } = deleteUserResult;\n\n\t\tdispatch(showLoading(isLoading));\n\n\t\tif (isSuccess) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tdispatch(showMessage(snackbarDefaults(`${userTranslation.t(\"USER\")} ${constantTranslation.t(\"DELETE_SUCCESSFUL\")}`, \"success\")));\n\t\t\t}, 250);\n\t\t\tdispatch(closeDialog());\n\t\t}\n\n\t\tif (error && isError) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"DELETE_ERROR\")} ${userTranslation.t(\"USER\")}`, \"error\")));\n\t\t}\n\t}, [deleteUserResult]);\n\n\tconst handleDelete = () => {\n\t\tdeleteUser(userId);\n\t};\n\n\treturn (\n\t\t<CustomFormDialog\n\t\t\tisValid={isValid}\n\t\t\tisDirty={isDirty}\n\t\t\thandleSubmit={handleSubmit((data) =>\n\t\t\t\tsubmitForm({\n\t\t\t\t\t...data,\n\t\t\t\t\tcategoryId: data.categoryId,\n\t\t\t\t\tphaseId: isPhaseShiftDisabled ? null : data.phaseId?.value,\n\t\t\t\t\tshiftId: isPhaseShiftDisabled ? null : data.shiftId?.value,\n\t\t\t\t\tdelegateUserId: data.delegateUserId?.value,\n\t\t\t\t\tdelegateUserName: \"\",\n\t\t\t\t\tdelegateUserSurname: \"\",\n\t\t\t\t\tescalationManagerId: data.escalationManagerId?.value,\n\t\t\t\t\tescalationManagerName: \"\",\n\t\t\t\t\tescalationManagerSurname: \"\",\n\t\t\t\t\tcreatedBy: \"\", // temporarily saved blank later value will be send\n\t\t\t\t\tlastLogin: \"2024-04-01T07:32:47.174\" // temporarily set as cannot be null\n\t\t\t\t})\n\t\t\t)}\n\t\t\ttitle={`${userTranslation.t(\"USER\")}`}\n\t\t>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Box sx={{ width: \"100%\" }}>\n\t\t\t\t\t<CustomTabs\n\t\t\t\t\t\ttabValue={userTab}\n\t\t\t\t\t\ttabLabel=\"user\"\n\t\t\t\t\t\ttabs={userDialogTabItems()}\n\t\t\t\t\t\thandleTabChange={(num) => setUserTab(num)}\n\t\t\t\t\t\tt={userTranslation.t}\n\t\t\t\t\t/>\n\t\t\t\t\t<CustomTabPanel\n\t\t\t\t\t\tvalue={userTab}\n\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\taria=\"Info\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Info\n\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CustomTabPanel>\n\t\t\t\t\t<CustomTabPanel\n\t\t\t\t\t\tvalue={userTab}\n\t\t\t\t\t\tindex={1}\n\t\t\t\t\t\taria=\"Organisation\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Organisation\n\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\tphases={phases}\n\t\t\t\t\t\t\tonPhasesScroll={onPhasesScroll}\n\t\t\t\t\t\t\tphaseInputChange={phaseInputChange}\n\t\t\t\t\t\t\tshifts={shifts}\n\t\t\t\t\t\t\tonShiftsScroll={onShiftsScroll}\n\t\t\t\t\t\t\tshiftsInputChange={shiftsInputChange}\n\t\t\t\t\t\t\tcategories={categories}\n\t\t\t\t\t\t\tusersList={usersList}\n\t\t\t\t\t\t\tonUsersListScroll={onUsersListScroll}\n\t\t\t\t\t\t\tusersListInputChange={usersListInputChange}\n\t\t\t\t\t\t\tsetSelectedPhase={setSelectedPhase}\n\t\t\t\t\t\t\tsetSelectedShift={setSelectedShift}\n\t\t\t\t\t\t\tselectedShift={selectedShift}\n\t\t\t\t\t\t\tsetSelectedDelegateUser={setSelectedDelegateUser}\n\t\t\t\t\t\t\tsetSelectedEscalationManager={setSelectedEscalationManager}\n\t\t\t\t\t\t\tsetUserCategoryId={setUserCategoryId}\n\t\t\t\t\t\t\tisPhaseShiftDisabled={isPhaseShiftDisabled}\n\t\t\t\t\t\t\tselectedPhase={selectedPhase}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CustomTabPanel>\n\t\t\t\t\t<CustomTabPanel\n\t\t\t\t\t\tvalue={userTab}\n\t\t\t\t\t\tindex={2}\n\t\t\t\t\t\taria=\"Audit\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Audit\n\t\t\t\t\t\t\tadd={add}\n\t\t\t\t\t\t\tauditData={auditData}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CustomTabPanel>\n\t\t\t\t</Box>\n\t\t\t</div>\n\t\t\t<div className=\"flex flex-row justify-end items-end w-full gap-12\">\n\t\t\t\t<div className=\"hidden md:flex md:flex-1\"></div>\n\t\t\t\t<div className=\"flex flex-1 gap-12\">\n\t\t\t\t\t{!add && (\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName={`rounded-md w-full`}\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={handleDelete}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{constantTranslation.t(\"DELETE\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={`rounded-md w-full`}\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={!(isValid && isDirty)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{constantTranslation.t(\"SAVE\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</CustomFormDialog>\n\t);\n};\n\nexport default UserDialogForm;\n","import CustomFilterContainer from \"app/shared-components/custom-filter-container/CustomFilterContainer\";\nimport CustomTable from \"app/shared-components/custom-table/CustomTable\";\nimport userHeadings from \"./constants/userHeadings\";\nimport CustomTableContainer from \"app/shared-components/custom-table-container/CustomTableContainer\";\nimport { useTranslation } from \"react-i18next\";\nimport { CONSTANTS, SETTINGS_PAGE, SHIFTS_PAGE, USER_PAGE } from \"app/constants/TranslationNamespaces\";\nimport { z } from \"zod\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useDispatch } from \"react-redux\";\nimport { openDialog } from \"@fuse/core/FuseDialog/fuseDialogSlice\";\nimport UserFilterForm from \"./user-filter-form/UserFilterForm\";\nimport { ITableUserArg, ITableUserItem, IUserEssentials, IUserFilter } from \"./UserModel\";\nimport UserCustomFilterActions from \"./user-custom-filter-actions/UserCustomFilterActions\";\nimport UserFilterDialogForm from \"./user-filter-dialog-form/UserFilterDialogForm\";\nimport UserTableActions from \"./user-table-actions/UserTableActions\";\nimport { DEFAULT_PAGE_SIZE } from \"app/constants/DefaultConfig\";\nimport { IGenericTable, SortOrder } from \"app/constants/DefaultInterfaces\";\nimport { BaseSyntheticEvent, useEffect, useState } from \"react\";\nimport UserImportCsvDialogForm from \"./user-import-csv-dialog-form/UserImportCsvDialogForm\";\nimport UserDialogForm from \"./user-dialog-form/UserDialogForm\";\nimport { showLoading } from \"app/shared-components/custom-loading/CustomLoadingSlice\";\nimport { snackbarDefaults } from \"app/constants/SnackbarDefaults\";\nimport { showMessage } from \"@fuse/core/FuseMessage/fuseMessageSlice\";\nimport { useGetAllUsersQuery } from \"./UserApi\";\nimport moment from \"moment\";\n\nconst UserContent = () => {\n\tconst userTranslation = useTranslation(USER_PAGE);\n\tconst constantTranslation = useTranslation(CONSTANTS);\n\tconst settingsTranslation = useTranslation(SETTINGS_PAGE);\n\tconst shiftsTranslation = useTranslation(SHIFTS_PAGE);\n\tconst dispatch = useDispatch();\n\n\tconst [fetchArgs, setFetchArgs] = useState<ITableUserArg>({ businessId: 1, page: 1, pageSize: DEFAULT_PAGE_SIZE, sortBy: \"name\", sortOrder: SortOrder.ASCENDING });\n\tconst [hasFilterButton, setHasFilterButton] = useState<boolean>(false);\n\tconst [curatedRows, setCuratedRows] = useState<Array<ITableUserItem>>([]);\n\tconst [tableInfo, setTableInfo] = useState<IGenericTable>({ currentPage: 1, pageSize: DEFAULT_PAGE_SIZE, totalCount: 0, totalPages: 0 });\n\tconst [totalData, setTotalData] = useState(0);\n\tconst getUsers = useGetAllUsersQuery(fetchArgs, { refetchOnMountOrArgChange: true });\n\n\tconst defaultFilterValues: IUserFilter = {\n\t\temployeeId: \"\",\n\t\temail: \"\",\n\t\tname: \"\",\n\t\tphaseId: undefined,\n\t\tshiftId: undefined\n\t};\n\n\tconst schema = z.object({\n\t\temployeeId: z.string().optional(),\n\t\temail: z.string().optional(),\n\t\tname: z.string().optional(),\n\t\tphaseId: z.any().optional(),\n\t\tshiftId: z.any().optional()\n\t});\n\n\tconst methods = useForm({\n\t\tmode: \"onChange\",\n\t\tdefaultValues: defaultFilterValues,\n\t\tresolver: zodResolver(schema)\n\t});\n\n\tconst { control, formState, handleSubmit, setValue } = methods;\n\tconst { errors } = formState;\n\n\tuseEffect(() => {\n\t\tconst { data: rawData, isLoading, isSuccess, isError, error, isFetching } = getUsers;\n\n\t\tdispatch(showLoading(isLoading));\n\t\tdispatch(showLoading(isFetching));\n\n\t\tif (isSuccess && rawData) {\n\t\t\tconst { totalCount, totalPages, currentPage, data, pageSize } = rawData;\n\t\t\tsetTableInfo((state) => ({ ...state, totalCount, totalPages, currentPage, pageSize }));\n\t\t\tdata?.map((userData) => {\n\t\t\t\tconst {\n\t\t\t\t\tid,\n\t\t\t\t\tname,\n\t\t\t\t\tsurname,\n\t\t\t\t\temail,\n\t\t\t\t\temployeeId,\n\t\t\t\t\tcategoryId,\n\t\t\t\t\tcategory,\n\t\t\t\t\tcreated,\n\t\t\t\t\tcreatedBy,\n\t\t\t\t\tdelegateUserId,\n\t\t\t\t\tescalationManagerId,\n\t\t\t\t\tinitialShiftPart,\n\t\t\t\t\tlastLogin,\n\t\t\t\t\tphaseId,\n\t\t\t\t\tphaseName,\n\t\t\t\t\tshiftId,\n\t\t\t\t\tshiftName,\n\t\t\t\t\tstartDate,\n\t\t\t\t\tarea,\n\t\t\t\t\tdelegateUserName,\n\t\t\t\t\tdelegateUserSurname,\n\t\t\t\t\tescalationManagerName,\n\t\t\t\t\tescalationManagerSurname\n\t\t\t\t} = userData;\n\n\t\t\t\tconst lastLoginFormated = calculateTimeDifference(lastLogin);\n\n\t\t\t\tsetCuratedRows((state) => {\n\t\t\t\t\tconst newState = state;\n\t\t\t\t\tnewState.push({\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tactions: true,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tsurname,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\temployeeId,\n\t\t\t\t\t\tcategoryId,\n\t\t\t\t\t\tcategory,\n\t\t\t\t\t\tcreated,\n\t\t\t\t\t\tcreatedBy,\n\t\t\t\t\t\tdelegateUserId,\n\t\t\t\t\t\tdelegate: fullName(delegateUserName, delegateUserSurname),\n\t\t\t\t\t\tescalationManagerId,\n\t\t\t\t\t\tescalationManager: fullName(escalationManagerName, escalationManagerSurname),\n\t\t\t\t\t\tinitialShiftPart,\n\t\t\t\t\t\tlastLogin: lastLoginFormated,\n\t\t\t\t\t\tphaseId,\n\t\t\t\t\t\tphaseName,\n\t\t\t\t\t\tshiftId,\n\t\t\t\t\t\tshiftName,\n\t\t\t\t\t\tstartDate,\n\t\t\t\t\t\tarea\n\t\t\t\t\t});\n\t\t\t\t\treturn newState;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tsetTotalData((state) => {\n\t\t\t\tif (fetchArgs.filter) {\n\t\t\t\t\treturn state;\n\t\t\t\t} else {\n\t\t\t\t\treturn totalCount;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (isError && error) {\n\t\t\tdispatch(showMessage(snackbarDefaults(`${constantTranslation.t(\"ERROR_LOADING_DATA\")} ${userTranslation.t(\"USERS\")}`, \"error\")));\n\t\t}\n\n\t\treturn () => setCuratedRows([]);\n\t}, [getUsers]);\n\n\tfunction calculateTimeDifference(dateTime) {\n\t\tconst now = moment();\n\t\tconst targetDate = moment(dateTime);\n\n\t\tif (targetDate.isAfter(now)) {\n\t\t\treturn \"Never\";\n\t\t}\n\n\t\tconst yearsDiff = now.diff(targetDate, \"years\");\n\t\tconst monthsDiff = now.diff(targetDate, \"months\");\n\n\t\tif (yearsDiff === 0 && monthsDiff === 0) {\n\t\t\tconst daysDiff = now.diff(targetDate, \"days\");\n\t\t\tif (daysDiff < 1) {\n\t\t\t\tconst hoursDiff = now.diff(targetDate, \"hours\");\n\t\t\t\tif (hoursDiff < 1) {\n\t\t\t\t\treturn \"A few minutes ago\";\n\t\t\t\t} else if (hoursDiff === 1) {\n\t\t\t\t\treturn \"An hour ago\";\n\t\t\t\t} else {\n\t\t\t\t\treturn hoursDiff + \" hours ago\";\n\t\t\t\t}\n\t\t\t} else if (daysDiff === 1) {\n\t\t\t\treturn \"Yesterday\";\n\t\t\t} else if (daysDiff < 7) {\n\t\t\t\treturn daysDiff + \" days ago\";\n\t\t\t} else {\n\t\t\t\tconst weeksDiff = now.diff(targetDate, \"weeks\");\n\t\t\t\tif (weeksDiff === 1) {\n\t\t\t\t\treturn \"A week ago\";\n\t\t\t\t} else {\n\t\t\t\t\treturn weeksDiff + \" weeks ago\";\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (yearsDiff === 1) {\n\t\t\treturn \"A year ago\";\n\t\t} else if (yearsDiff > 1) {\n\t\t\treturn yearsDiff + \" years ago\";\n\t\t} else {\n\t\t\treturn \"Never\";\n\t\t}\n\t}\n\n\tfunction fullName(name: string, surname: string): string {\n\t\tif (!name && !surname) {\n\t\t\treturn \"\";\n\t\t} else if (name && !surname) {\n\t\t\treturn name;\n\t\t} else if (name && surname) {\n\t\t\treturn name + \" \" + surname;\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tsetHasFilterButton(totalData > DEFAULT_PAGE_SIZE);\n\t}, [totalData]);\n\n\tconst handleImportCsv = () => {\n\t\tdispatch(\n\t\t\topenDialog({\n\t\t\t\tchildren: <UserImportCsvDialogForm />\n\t\t\t})\n\t\t);\n\t};\n\tconst handleExportCsv = () => alert(\"Work in progress\");\n\n\tconst handleEdit = (event: BaseSyntheticEvent) => {\n\t\tconst { id } = event.target;\n\n\t\tdispatch(\n\t\t\topenDialog({\n\t\t\t\tchildren: (\n\t\t\t\t\t<UserDialogForm\n\t\t\t\t\t\tadd={false}\n\t\t\t\t\t\tuserId={id}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t})\n\t\t);\n\t};\n\n\tconst handlePageChange = (event: React.MouseEvent<HTMLButtonElement> | null, newPage: number) => {\n\t\tsetFetchArgs((state) => ({ ...state, page: newPage + 1 }));\n\t};\n\n\tconst handleSortChange = (event: React.MouseEvent<unknown>, property: keyof IUserEssentials) => {\n\t\tsetFetchArgs((state) => {\n\t\t\tlet sortOrder;\n\n\t\t\tif (state.sortBy === property) {\n\t\t\t\tif (state.sortOrder === SortOrder.ASCENDING) {\n\t\t\t\t\tsortOrder = SortOrder.DESCENDING;\n\t\t\t\t} else {\n\t\t\t\t\tsortOrder = SortOrder.ASCENDING;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsortOrder = SortOrder.ASCENDING;\n\t\t\t}\n\n\t\t\treturn { ...state, sortBy: property, sortOrder };\n\t\t});\n\t};\n\n\tconst submitFilter = (data: IUserFilter) => {\n\t\tconst { name, employeeId, email, phaseId, shiftId } = data;\n\t\tsetFetchArgs((state) => ({ ...state, name, email, employeeId, shiftId: shiftId?.value, shiftName: shiftId?.label, phaseId: phaseId?.value, phaseName: phaseId?.label }));\n\t};\n\n\treturn (\n\t\t<CustomTableContainer\n\t\t\ttitle={userTranslation.t(\"USER_FILTERS\")}\n\t\t\thasFilterButton={true}\n\t\t\thasAddButton={true}\n\t\t\thandleClick={() =>\n\t\t\t\tdispatch(\n\t\t\t\t\topenDialog({\n\t\t\t\t\t\tchildren: <UserDialogForm add={true} />\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\t\t\thandleFilterClick={() =>\n\t\t\t\tdispatch(\n\t\t\t\t\topenDialog({\n\t\t\t\t\t\tchildren: (\n\t\t\t\t\t\t\t<UserFilterDialogForm\n\t\t\t\t\t\t\t\tfetchArgs={fetchArgs}\n\t\t\t\t\t\t\t\tsubmitFilter={submitFilter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\t\t\tcustomActionButtons={UserCustomFilterActions(handleImportCsv, handleExportCsv)}\n\t\t>\n\t\t\t<CustomFilterContainer\n\t\t\t\thasAddButton={true}\n\t\t\t\thandleFilterClick={handleSubmit((data) => {\n\t\t\t\t\tsubmitFilter(data);\n\t\t\t\t})}\n\t\t\t\thandleAddClick={() =>\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\topenDialog({\n\t\t\t\t\t\t\tchildren: <UserDialogForm add={true} />\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tcustomActionButtons={UserCustomFilterActions(handleImportCsv, handleExportCsv)}\n\t\t\t\tcustomActionClass={{ parent: \"xl:col-span-6 col-span-5 justify-end\", filter: \"\" }}\n\t\t\t>\n\t\t\t\t<UserFilterForm\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\terrors={errors}\n\t\t\t\t\tfilter={true}\n\t\t\t\t\tsetValue={setValue}\n\t\t\t\t/>\n\t\t\t</CustomFilterContainer>\n\t\t\t<CustomTable\n\t\t\t\tsortBy={fetchArgs?.sortBy}\n\t\t\t\tsortOrder={fetchArgs?.sortOrder}\n\t\t\t\tshowId={true}\n\t\t\t\ttableLabel={userTranslation.t(\"USERS\")}\n\t\t\t\ttableHeadings={userHeadings()}\n\t\t\t\tt={userTranslation.t}\n\t\t\t\thasActions={true}\n\t\t\t\ttableActions={UserTableActions(handleEdit)}\n\t\t\t\ttableInfo={tableInfo}\n\t\t\t\ttableRows={curatedRows}\n\t\t\t\thandlePageChange={handlePageChange}\n\t\t\t\thandleSortChange={handleSortChange}\n\t\t\t\thasFilterButton={hasFilterButton}\n\t\t\t/>\n\t\t</CustomTableContainer>\n\t);\n};\n\nexport default UserContent;\n","import PageHeader from \"app/shared-components/page-header/PageHeader\";\nimport UserContent from \"./UserContent\";\nimport FusePageCarded from \"@fuse/core/FusePageCarded\";\nimport DefaultRootStyle from \"app/constants/DefaultRootStyle\";\nimport { useTranslation } from \"react-i18next\";\nimport { styled } from \"@mui/material/styles\";\nimport { USER_PAGE } from \"app/constants/TranslationNamespaces\";\n\nconst Root = styled(FusePageCarded)(({ theme }) => ({\n\t...DefaultRootStyle(theme)\n}));\n\nconst User = () => {\n\tconst { t } = useTranslation(USER_PAGE);\n\n\treturn (\n\t\t<Root\n\t\t\theader={<PageHeader title={t(\"TITLE\")} />}\n\t\t\tscroll=\"page\"\n\t\t\tcontent={<UserContent />}\n\t\t/>\n\t);\n};\n\nexport default User;\n"],"names":["userHeadings","UserFilterForm","props","control","errors","filter","setValue","phaseId","dispatch","useDispatch","constantTranslation","useTranslation","CONSTANTS","SHIFTS_PAGE","settingsTranslation","SETTINGS_PAGE","userTranslation","USER_PAGE","selectedPhase","setSelectedPhase","useState","selectedShift","setSelectedShift","phaseFetchArg","setPhaseFetchArg","DEFAULT_PAGE_SIZE","SortOrder","getBusinessPhases","useGetAllBusinessPhasesQuery","phases","setPhases","totalPhases","setTotalPhases","shiftsFetchArg","setShiftsFetchArg","skipShiftsFetch","setSkipShiftsFetch","getShifts","useGetAllShiftsQuery","shifts","setShifts","totalShifts","setTotalShifts","useEffect","isSuccess","rawData","isLoading","isFetching","isError","error","showLoading","data","totalCount","newShiftsData","item","state","showMessage","snackbarDefaults","phase","onPhasesScroll","onShiftsScroll","phaseInputChange","value","shiftsInputChange","jsxs","Fragment","jsx","CustomTextField","CustomAutoComplete","UserCustomFilterActions","handleEdit","handleDelete","FuseSvgIcon","UserFilterDialogForm","submitFilter","fetchArgs","constantTranslations","setPhaseId","defaultFilterValues","schema","z","methods","useForm","zodResolver","formState","handleSubmit","getValues","isDirty","isValid","name","email","employeeId","phaseName","shiftId","shiftName","CustomDialog","closeDialog","UserTableActions","userImportDialogHeadings","CustomFileUploadField","label","accept","setFile","other","useStyles","makeStyles","customClass","setCustomClass","Controller","field","TextField","_a","event","addTagTypes","UserApi","api","build","businessId","page","pageSize","sortBy","sortOrder","params","userId","queryArg","useGetOneUserQuery","useGetAllUsersQuery","usePutUserMutation","usePostUserMutation","useDeleteUserMutation","usePostBulkUserUploadMutation","usePostAddMultipleUserMutation","UserImportCsvDialogForm","add","skip","setSkip","file","postBulkUser","postBulkUserResult","defaultValues","reset","submitForm","handleUpload","formData","CustomFormDialog","Typography","Button","CustomTable","userDialogTabItems","Info","Organisation","categories","usersList","onUsersListScroll","usersListInputChange","setSelectedDelegateUser","setSelectedEscalationManager","setUserCategoryId","isPhaseShiftDisabled","shiftsTranslation","CustomSelectField","CustomDatePickerField","Audit","auditData","lastLogin","setLastLogin","created","setCreated","createdBy","setCreatedBy","dateFormatter","date","moment","UserDialogForm","userTab","setUserTab","getUserById","postUser","postUserResult","putUser","putUserResult","deleteUser","deleteUserResult","setAuditData","selectedDelegateUser","selectedEscalationManager","shiftIdOnEdit","setShiftIdOnEdit","categoriesFetchArg","setCategoriesFetchArg","getCategories","useGetAllUserCategoriesQuery","setCategories","totalCategories","setTotalCategories","usersListFetchArg","setUsersListFetchArg","getUsersList","setUsersList","totalUsersList","setTotalUsersList","getBusinessInfo","useGetBusinessInfoQuery","area","setArea","userCategoryId","skipUserCategoryId","setSkipUserCategoryId","getUserCategoryById","useGetOneUserCategoryQuery","getRoles","useGetAllRolesQuery","roles","setRoles","setIsPhaseShiftDisabled","BUSINESS_AREA","trigger","selectedRole","role","boolValue","newState","fullName","surname","user","category","key","shiftValue","shift","_b","_f","_e","_d","_c","Box","CustomTabs","num","CustomTabPanel","UserContent","setFetchArgs","hasFilterButton","setHasFilterButton","curatedRows","setCuratedRows","tableInfo","setTableInfo","totalData","setTotalData","getUsers","totalPages","currentPage","userData","id","categoryId","delegateUserId","escalationManagerId","initialShiftPart","startDate","delegateUserName","delegateUserSurname","escalationManagerName","escalationManagerSurname","lastLoginFormated","calculateTimeDifference","dateTime","now","targetDate","yearsDiff","monthsDiff","daysDiff","hoursDiff","weeksDiff","handleImportCsv","openDialog","handleExportCsv","handlePageChange","newPage","handleSortChange","property","CustomTableContainer","CustomFilterContainer","Root","styled","FusePageCarded","theme","DefaultRootStyle","User","t","PageHeader"],"mappings":"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"}